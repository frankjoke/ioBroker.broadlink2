(function(e){function t(t){for(var r,n,s=t[0],c=t[1],l=t[2],u=0,p=[];u<s.length;u++)n=s[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&p.push(i[n][0]),i[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],r=!0,s=1;s<o.length;s++){var c=o[s];0!==i[c]&&(r=!1)}r&&(a.splice(t--,1),e=n(n.s=o[0]))}return e}var r={},i={app:0},a=[];function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=r,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},1:function(e,t){},"135d":function(e,t){function o(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}o.keys=function(){return[]},o.resolve=o,e.exports=o,o.id="135d"},"1f19":function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pa-0 elevation-2 fluid xs-12 xl-12"},[o("v-toolbar",{attrs:{dark:"",height:"36",color:"primary"}},[e.icon?o("v-icon",{attrs:{left:""}},[e._v(e._s(e.icon))]):e._e(),o("v-toolbar-title",{staticClass:"subtitle-2"},[e._v(e._s(e.adapterName+"."+e.adapterInstance+" "+e.$t("log entries")+": "+e.adapterLog.length+" "))]),o("v-spacer"),o("v-text-field",{staticClass:"body-1",attrs:{"append-icon":"mdi-filter",label:e.$t("Filter"),"single-line":"","hide-details":"",dense:""},model:{value:e.markRed,callback:function(t){e.markRed=t},expression:"markRed"}}),o("v-spacer",[e._v("⁠")]),o("fjB",{attrs:{label:"Clear",text:"",left:"",img:"mdi-delete-forever",small:"",tooltip:"delete all but last message"},on:{click:function(t){return e.adapterLog.splice(1)}}}),o("fjB",{attrs:{label:"To Clipboard",text:"",img:"mdi-clipboard-plus-outline",small:"",left:"",tooltip:"copy filtered items to clipboard"},on:{click:e.clipboard}}),o("fjB",{attrs:{label:"Show lines -5",text:"",img:"mdi-format-indent-decrease",small:"",right:"",tooltip:"reduse number of shown lines by 5"},on:{click:function(t){return e.changeMax(-5)}}}),e._v(" "+e._s(e.myMax)+" "),o("fjB",{attrs:{label:"Show lines +5",text:"",img:"mdi-format-indent-increase",small:"",left:"",tooltip:"increase number of shown lines by 5"},on:{click:function(t){return e.changeMax(5)}}})],1),o("v-simple-table",{staticClass:"elevation-2 xa-1",style:"display: block; max-height: "+(36+24*e.myMax)+"px; overflow: auto; width: 100%;",attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[o("thead",[o("tr",[o("th",{staticClass:"text-left",domProps:{textContent:e._s(e.$t("Time"))}}),o("th",{staticClass:"text-left",domProps:{textContent:e._s(e.$t("Severity"))}}),o("th",{staticClass:"text-left",domProps:{textContent:e._s(e.$t("Log Message"))}})])]),o("tbody",e._l(e.adapterLogFiltered,(function(t,r){return o("tr",{key:r.toString()+t.ts.toString()},[o("td",{class:"height24 caption "+e.sevColor(t),domProps:{textContent:e._s(e.timeStamp(t.ts))}}),o("td",{class:"height24 caption "+e.sevColor(t),domProps:{textContent:e._s(t.severity)}}),o("td",{class:"height24 caption "+e.sevColor(t),domProps:{textContent:e._s(t.message)}})])})),0)]},proxy:!0}])})],1)},i=[],a={name:"fjIoBrokerLog",props:{showMax:{type:Number,default:25},icon:{type:String,required:!1,default:"mdi-playlist-star"}},data(){return{markRed:"",myMax:25}},computed:{adapterLog(){return this.$store.state.adapterLog},adapterInstance(){return this.$store.state.iobrokerInstance},adapterName(){return this.$store.state.iobrokerAdapter},adapterLogFiltered(){const e=this.adapterLog,t=this.markRed?this.markRed.toLowerCase():null;return t?e.filter(e=>e.message.toLowerCase().indexOf(t)>=0):e}},methods:{clipboard(e){let t="";for(const o of this.adapterLogFiltered)t+=this.timeStamp(o.ts)+"/"+o.severity+"\t"+o.message+"\n";return this.$copyText(t),this.$alert(this.$t("Copied filtered log to clipboard!"))},sevColor(e){const t=e.severity;let o="primary";switch(t){case"warning":case"error":o=t;break;case"debug":o="grey";break;case"info":e.message.indexOf(" debug: ")>=0&&(o="grey");default:break}return o+" lighten-4"},timeStamp(e){function t(e,t){t=t||2,e=e.toString();while(e.length<t)e="0"+e;return e}const o=new Date(e);return`${t(o.getHours())}:${t(o.getMinutes())}:${t(o.getSeconds())}.${t(o.getMilliseconds(),3)}`},changeMax(e){this.myMax+e<5?this.myMax=5:this.myMax+e>100?this.myMax=100:this.myMax+=e}},mounted(){this.myMax=this.showMax}},n=a,s=o("2877"),c=o("6544"),l=o.n(c),d=o("132d"),u=o("1f4f"),p=o("2fa4"),m=o("8654"),h=o("71d9"),f=o("2a7f"),g=Object(s["a"])(n,r,i,!1,null,null,null);t["a"]=g.exports;l()(g,{VIcon:d["a"],VSimpleTable:u["a"],VSpacer:p["a"],VTextField:m["a"],VToolbar:h["a"],VToolbarTitle:f["a"]})},"282d":function(e,t,o){var r=o("3817");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=o("499e").default;i("37c45920",r,!0,{sourceMap:!1,shadowMode:!1})},3817:function(e,t,o){var r=o("24fb");t=r(!1),t.push([e.i,".height24{height:22px!important}html{overflow-y:auto!important}",""]),e.exports=t},4113:function(e,t,o){"use strict";o("d44a")},4907:function(e,t,o){"use strict";o("282d")},"4dd5":function(e,t,o){"use strict";(function(t){class r{constructor(e,t){if("function"!=typeof e)throw"CacheP needs an async function returning a Promise as first argument!";return this._cache={},this._fun=e,this._delay=t||0,this}async cacheItem(e,t=!0,o){if(o=o||this._fun,this._delay&&await new Promise(e=>setTimeout(()=>e(),this._delay)),t&&void 0!==this._cache[e])return this._cache[e];o||(o=this._fun);const r=await o(e);return this._cache[e]=r,r}isCached(e){return void 0!==this._cache[e]}clearCache(){this._cache={}}get cache(){return this._cache}cacheSync(e,t=!0,o){const r=this.isCached(e);if(r&&t)return this._cache[e];if(o=o||this._fun,"function"==typeof o)try{const t=o(e);if(t)return this._cache[e]=t,t}finally{}return null}}class i{constructor(e){this._stime=e||t.hrtime()}get diff(){return t.hrtime(this._stime)}get text(){const e=this.diff,t=e[1].toString(10);return e[0].toString(10)+"."+("0".repeat(9-t.length)+t).slice(0,6)}get time(){return Number(this.text)}set time(e){this._stime=e||t.hrtime()}}class a{constructor(e,t){return this._p=e||Promise.resolve(),this._delay=t||0,this}get p(){return this._p}set p(e){return this.add(e),e}add(e,...t){const o="function"===typeof e?e:()=>e;if(this._delay){const e=()=>new Promise(e=>setTimeout(()=>e(),this._delay));this._p=this._p.then(()=>e(),()=>e())}return this._p=this._p.then(()=>o(...t),()=>o(...t)),this}then(e,t){return this._p=this._p.then(e,t)}catch(e){return this._p=this._p.then(e=>e,e)}}const n=o("3022"),s=o("3e8f").exec,c=o("3c43"),l=o("3e8f"),d=o("f654"),u=o("bc3a"),p={},m=new a,h={},f={},g={},b={};let v,y,k,w,C,S,_,j,x=Promise.resolve(),O=!1,$=!1,I=1,A=null,T=e=>Promise.resolve(P.W(`Message ${this.O(e)} received and no handler defined!`));function N(e){e||(e=y),e=e||{},"string"===typeof e?e={name:e}:e.name=k,e=Object.assign(e,{async ready(){P.extendObject=v.extendObjectAsync.bind(v),await P.initAdapter(),w&&w(v)},async unload(e){try{await Promise.resolve(x?x(null):null).catch(e=>P.Wf(e)),P.stop(null,e),e()}catch(t){e()}},objectChange(e,t){"function"==typeof S&&setImmediate(()=>S(e,t)),t?p[e]=t:e&&(h[e]&&delete h[e],g[e]&&delete g[e],p[e]&&delete p[e])},stateChange(e,t){!_||t&&t.from==="system.adapter."+P.ains||setImmediate(()=>_(e,t).catch(t=>P.W(`Error in StateChange for ${e} = ${P.O(t)}`))),t?h[e]=t:e&&(delete h[e],delete g[e])},message(e){"object"===typeof e&&e.command&&P.processMessage(e)}});try{const t=o("9508");v=new t.Adapter(e)}catch(t){console.error("cannot find ioBroker...")}return v&&P.init2(v),v}function E(e,t){return void 0===$?t:v&&v.log&&"function"===typeof v.log[e]?v.log[e](t):console.log(e+": "+t)}function L(e,t){b[e]?(b[e].push(t),g[t]=t):g[e]&&g[e]!==t?(g[t]=t,b[e]=[t],delete g[e]):g[e]=t}class P{static get config(){return v.config}static set stateChange(e){_=e}static get stateChange(){return _}static set objChange(e){S=e}static get objChange(){return S}static set onStop(e){j=e}static set messages(e){T=e}static get messages(){return T}static set onUnload(e){x=e}static async processMessage(e){let t=null;return t="debug"===e.command?$=isNaN(parseInt(e.message))?this.parseLogic(e.message):parseInt(e.message):T?await T(e).catch(e=>this.Wf("Message execution error: %O",e)):null,e.callback&&await v.sendTo(e.from,e.command,t,e.callback),t}static getObjects(e){e=e||"";const t={include_docs:!0};return e&&(e="*"===e?"":e,t.startkey=(e.startsWith("system.")?"":this.ain)+e,t.endkey=(e.startsWith("system.")?"":this.ain)+e+"香"),v.getObjectListAsync(t).then(e=>e&&e.rows?e.rows:[],()=>[])}static async initAdapter(){try{this.Df("Adapter %s starting.",this.ains),this.getObjectList=v.getObjectListAsync?v.getObjectListAsync.bind(v):this.c2p(v.objects.getObjectList).bind(v.objects),this.getForeignState=v.getForeignStateAsync.bind(v),this.setForeignState=v.setForeignStateAsync.bind(v),this.getState=v.getStateAsync.bind(v),this.setState=v.setStateAsync.bind(v),this.getStates=v.getStatesAsync.bind(v),this.removeState=async(e,t)=>{await v.delStateAsync(e,t).catch(this.nop),await v.delObjectAsync((delete h[e],e),t).catch(this.nop)};const e=await v.getStatesAsync("*").catch(e=>this.W(e));for(const r of Object.keys(e))h[r]=e[r];let t=await this.getObjects("*");const o=t.length;for(const r of t){const e=r.doc;p[e._id]=e,"state"===e.type&&e.common&&e.common.name&&(v.config.forceinit&&e._id.startsWith(this.ain)&&await this.removeState(e.common.name),L(e.common.name,e._id))}t=await v.getForeignObjectAsync("system.config").catch(()=>null),t&&(A=t.common,A&&A.language&&(v.config.lang=A.language),A&&A.latitude&&(v.config.latitude=parseFloat(A.latitude),v.config.longitude=parseFloat(A.longitude))),t=await v.getForeignObjectAsync("system.adapter."+this.ains).catch(()=>null),t&&(v.config.adapterConf=t.common,v.config.adapterConf&&v.config.adapterConf.loglevel&&(v.config.loglevel=v.config.adapterConf.loglevel),"debug"!==v.config.loglevel&&"silly"!==v.config.loglevel||(this.debug=!0)),P.D(`${v.name} received ${o} objects and ${this.ownKeys(h).length} states, with config ${this.ownKeys(v.config)}`),v.subscribeStates("*"),v._objChange&&v.subscribeObjects("*"),this.I(k+" initialization started...")}catch(e){this.stop(this.E(k+" Initialization Error:"+this.F(e)))}}static init(e,t,o){w=o,"string"===typeof t&&(t={name:t}),y=Object.assign({},t),k=y.name,w&&(e&&e.parent?e.exports=e=>v=N(e):v=N(y))}static get AI(){return v}static init2(){return d(v&&v.name,"myAdapter:(adapter) no adapter here!"),k=v.name,$=C=O=!1,I=1,A=null,this.writeFile=this.c2p(l.writeFile),this.readFile=this.c2p(l.readFile),this.getForeignObject=v.getForeignObjectAsync.bind(v),this.setForeignObject=v.setForeignObjectAsync.bind(v),this.getForeignObjects=v.getForeignObjectsAsync.bind(v),this.getObject=v.getObjectAsync.bind(v),this.deleteState=e=>v.deleteStateAsync(e).catch(e=>"Not exists"===e?this.resolve():this.reject(e)),this.delObject=(e,t)=>v.delObjectAsync(e,t).catch(e=>"Not exists"===e?this.resolve():this.reject(e)),this.delState=(e,t)=>v.delStateAsync(e,t).catch(e=>"Not exists"===e?this.resolve():this.reject(e)),this.removeState=(e,t)=>v.delStateAsync(e,t).then(()=>this.delObject((delete h[e],e),t)),this.setObject=v.setObjectAsync.bind(v),this.createState=v.createStateAsync.bind(v),this.extendObject=v.extendObjectAsync.bind(v),this.extendForeignObject=v.extendForeignObjectAsync.bind(v),t.on("rejectionHandled",(e,t)=>this.Wr(!0,"Promise problem rejectionHandled of Promise %s with reason %s",t,e)),t.on("unhandledRejection",(e,t)=>this.Wr(!0,"Promise problem unhandledRejection of Promise %O with reason %O",t,e)),v}static idName(e){return p[e]&&p[e].common?p[e].common.name:(g[e]&&g[e],e)}static J(e,t){let o;if(!e)return e;"string"!==typeof e&&(e=e.toString());try{o=JSON.parse(e,t)}catch(r){o={error:r,error_description:`${r} on string ${e}`}}return o}static pE(e,t){function o(){const e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const o=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t};const r=new Error("Test");Error.captureStackTrace(r,t);const i=r.stack;return Error.prepareStackTrace=o,Error.stackTraceLimit=e,i.map(e=>e.getFileName()?(e.getFunctionName()||"anonymous")+" in "+e.getFileName()+" @"+e.getLineNumber()+":"+e.getColumnNumber():"")}return t=t||P.pE,P.Wf("Promise failed @ %O error: %o",o().join("; "),e),e}static nop(e){return e}static split(e,t){return this.trim(("string"===typeof e?e:""+e).split(t))}static trim(e){return Array.isArray(e)?e.map(this.trim):"string"===typeof e?e.trim():(""+e).trim()}static D(e,t){return!$||I>Number($)||($?E("info","debug: "+e):E("debug",e)),void 0!==t?t:e}static Dr(e){if(!$&&I>Number($))return e;{const e=this.f.apply(null,Array.prototype.slice.call(arguments,1));$?E("info","debug: "+e):E("debug",e)}return e}static Df(...e){if($||!(I>Number($)))return e=this.f(...e),$?E("info","debug: "+e):E("debug",e)}static F(){return n.format.apply(null,arguments)}static f(){return n.format.apply(null,arguments).replace(/\n\s+/g," ")}static I(e,t){return E("info",e),void 0===t?e:t}static Ir(e){return E("info",this.f.apply(null,Array.prototype.slice.call(arguments,1))),e}static If(){return E("info",this.f.apply(null,arguments))}static Wf(){return E("warn",this.f.apply(null,arguments))}static Wr(e){return E("warn",this.f.apply(null,Array.prototype.slice.call(arguments,1))),e}static Er(e){return E("error",this.f.apply(null,Array.prototype.slice.call(arguments,1))),e}static W(e,t){return E("warn",e),void 0===t?e:t}static E(e,t){return E("error",e),void 0===t?e:t}static Ef(){return E("error",this.f.apply(null,arguments))}static toNumber(e){return isNaN(Number(e))?0:Number(e)}static toInteger(e){return parseInt(this.toNumber(e))}static set addq(e){return m.p=e,m}static get debug(){return $}static set debug(e){$=e}static get timer(){return C}static set timer(e){C=e}static get name(){return k}static get states(){return h}static get adapter(){return v}static get aObjects(){return v.objects}static get objects(){return p}static get debugLevel(){return I}static set debugLevel(e){I=e}static get ains(){return v.namespace}static get ain(){return this.ains+"."}static get C(){return v.config}static fullName(e){return this.ain+e}static parseLogic(e){return!this.includes(["0","off","aus","false","inactive",""],e.toString().trim().toLowerCase())&&this.includes(["1","-1","on","ein","true","active"],e.toString().trim().toLowerCase())}static clone(e){return JSON.parse(JSON.stringify(e))}static P(e,t,o){return e instanceof Promise?e:e&&"function"===typeof e.then?new Promise((t,o)=>e.then(t,o)):e?this.resolve(t||e):this.reject(o||e)}static nothing(){return null}static nextTick(e){return new Promise(o=>t.nextTick(()=>o(e)))}static resolve(e){return this.nextTick(e)}static async reject(e){return await this.nextTick(),Promise.reject(e)}static wait(e,...t){return e=parseInt(this.toNumber(e)),e<0?this.nextTick(...t):new Promise(o=>setTimeout(()=>o(...t),e))}static async retry(e,t,o,...r){e=this.toInteger(e),e=e||2;while(e>0)try{const e=await t(...r);return e}catch(i){if(e--,!e)return Promise.reject(i);await this.wait(o||0)}return null}static async pSequence(e,t,o){o=o||0,Array.isArray(e)||"object"!==typeof e||(e=Object.entries(e).filter(t=>e.hasOwnProperty(t[0])));const r=[];for(const a of e){r.length&&await this.wait(o);try{const e=await t(a);r.push(e)}catch(i){r.push(i)}}return r}static pTimeout(e,t,o){const r=this.toNumber(t);let i=null;return new Promise((t,a)=>{const n=e=>(i&&clearTimeout(i),i=null,t(e)),s=e=>(i&&clearTimeout(i),i=null,a(e));i=setTimeout(()=>{i=null,a(`timer ${r} run out`)},r),o&&o(n,s),this.P(e).then(n,s)})}static async Ptime(e,t){const o=Date.now();"function"===typeof e&&(e=e(t)),await Promise.resolve(e).catch(()=>null);const r=Date.now();return r-o}static O(e,t){return n.inspect(e,{depth:t||2,colors:!1}).replace(/\n\s*/g,"")}static removeEmpty(e){if("object"!==this.T(e))return e;const t=this.clone(e);for(const o of Object.getOwnPropertyNames(t))t[o]||"boolean"===typeof t[o]||delete t[o];return t}static S(e,t){return"string"===typeof e?e:this.O(e,t)}static N(e,...t){return setImmediate(e,...t)}static T(e,t){let o=typeof e;return"object"===o?Array.isArray(e)?o="array":e instanceof RegExp?o="regexp":null===e&&(o="null"):"number"===o&&isNaN(e)&&(o="NaN"),void 0===t?o:this.T(t)===o}static locDate(e){return e instanceof Date?new Date(e.getTime()-6e4*e.getTimezoneOffset()):"string"===typeof e?new Date(Date.parse(e)-6e4*(new Date).getTimezoneOffset()):isNaN(+e)?new Date(Date.now()-6e4*(new Date).getTimezoneOffset()):new Date(+e-6e4*(new Date).getTimezoneOffset())}static dateTime(e){return this.locDate(e).toISOString().slice(0,-5).replace("T","@")}static obToArray(e){return Object.keys(e).filter(t=>e.hasOwnProperty(t)).map(t=>e[t])}static includes(e,t){return"object"===this.T(e)?void 0!==e[t]:Array.isArray(e)?void 0!==e.find(e=>e===t):e===t}static ownKeys(e){return"object"===this.T(e)?Object.getOwnPropertyNames(e):[]}static ownKeysSorted(e){return this.ownKeys(e).sort((function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e>t?1:e<t?-1:0}))}static async stop(e,o){if(!O){try{j&&await j(e)}finally{O=!0,C&&(Array.isArray(C)?C.forEach(e=>clearInterval(e)):clearInterval(C),C=null)}if(o)try{o&&o()}finally{o&&o()}else{const o=e<0?0:e||0;P.Df("Adapter will exit now with code %s and method %s!",o,v&&v.terminate?"adapter.terminate":"process.exit"),v&&v.terminate?v.terminate(o):t.exit(o)}}}static seriesOf(e,t,o){d("function"===typeof t,"series(obj,promfn,delay) error: promfn is not a function!"),o=parseInt(o)||0;let r=Promise.resolve();const i=[],a=o>0?e=>r=r.then(()=>t(e).then(e=>this.wait(o,i.push(e)))):e=>r=r.then(()=>t(e));for(const n of e)a(n);return r.then(()=>i)}static seriesInOI(e,t,o){d("function"===typeof t,"series(obj,promfn,delay) error: promfn is not a function!"),o=parseInt(o)||0;let r=Promise.resolve();const i=[],a=o>0?e=>r=r.then(()=>t(e).then(e=>this.wait(o,i.push(e)))):e=>r=r.then(()=>t(e));for(const n in e)a(e[n]);return r.then(()=>i)}static seriesIn(e,t,o){d("function"===typeof t,"series(obj,promfn,delay) error: promfn is not a function!"),o=parseInt(o)||0;let r=Promise.resolve();const i=[],a=o>0?e=>r=r.then(()=>t(e).then(e=>this.wait(o,i.push(e)))):e=>r=r.then(()=>t(e));for(const n in e)a(n,e);return r.then(()=>i)}static c2p(e,t){const o=n.promisify(e);return t?o.bind(t):o}static async repeat(e,t,o,...r){e=e<=0?2:e||2;while(e--)await t(...r),await this.wait(parseInt(o)||10);return!0}static exec(e){const t=e.startsWith("!");return new Promise((o,r)=>{try{s(t?e.slice(1):e,(e,i,a)=>{if(t&&e)return e[a]=a,r(e);o(i)})}catch(i){r(i)}})}static async get(e,t){const o={};let r;"object"===typeof t&&(Object.assign(o,t),t=o.retry||1),t=this.toInteger(t);while(t>=0)try{return r=await u(e,o),r&&r.data}catch(i){if(t<=0)return Promise.reject(i)}finally{--t}return null}static equal(e,t){if(e==t)return!0;const o=this.T(e),r=this.T(t);if(o===r){if("array"===o||"function"===o||"object"===o)return JSON.stringify(e)===JSON.stringify(t)}else if("string"===o&&("array"===r||"function"===r||"object"===r)&&e===this.O(t))return!0;return!1}static get getMyStates(){return h}static async changeState(e,t,o){o=o||{};const r=o.always,i=o.ts,a=o.ack;if(void 0===t)return this.Wf("You tried to set state '%s' to 'undefined' with %j!",e,o),null;const n={val:t,ack:!!a};i&&(n.ts=i);let s=h[e]?h[e]:h[e]=await v.getStateAsync(e).catch(()=>{});return s&&!r&&this.equal(s.val,t)&&s.ack===a||(await v.setStateAsync(e,n).catch(t=>(this.Wf("Error %j is setState for %s with %j",t,e,n),n)),h[e]?(s=h[e],s.val=t,s.ack=a,i&&(s.ts=i)):h[e]=s=await v.getStateAsync(e),this.Df("ChangeState ack:%s of %s = %s",!!a,e,t)),s}static getClass(e){if("undefined"===typeof e)return"undefined";if(null===e)return"null";const t=Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1];return t}static async myGetState(e){if(h[e])return h[e];if(!e.startsWith(this.ain)&&h[this.ain+e])return h[this.ain+e];let t=g[e];if(t&&h[t])return h[t];t||(t=e);const o=await v.getForeignStateAsync(t);return o&&(h[t]=o),o}static async makeState(e,t,o,r,i){const a="object"==typeof o?o:{ack:o};r&&(a.always=r),i&&(a.define=i);let n=e;if("string"===typeof n)e=n.endsWith("Percent")?{unit:"%"}:{};else{if("string"!==typeof n.id)throw new Error(this.W("Invalid makeState id: "+this.O(n)));n=n.id}const s=n.startsWith(this.ain)?n:this.ain+n;if((!a.define||"object"!==typeof e)&&f[s])return this.changeState(n,t,a);const c={common:{name:n,read:!0,write:!1,state:"state",role:"value",type:this.T(t)},type:"state",_id:s};a.common&&Object.assign(c.common,a.common),"object"===c.common.type&&(c.common.type="mixed");for(const l in e)if("native"===l){c.native=c.native||{};for(const t in e[l])c.native[t]=e[l][t]}else"id"!==l&&"val"!==l&&(c.common[l]=e[l]);return c.common.write&&(c.common.role=c.common.role.replace(/^value/,"level")),L(n,s),f[s]=n,await v.extendObjectAsync(s,c,null).catch(e=>(this.Wf("error %j extend object %s",e,s),null)),this.Df("created State %s",s),"state"!==c.common.state||p[this.ain+n]||(p[s]=c),this.changeState(s,t,a)}static async cleanup(e){const t=await this.getObjects(e);for(const o of t){const e=o.id;if(!e||!e.startsWith(this.ain)||f[e])continue;h[e]&&(this.Df("Cleanup delete state %s",e),await v.deleteStateAsync(e).catch(P.nop));let t=!1;for(const o of Object.keys(f))if(o.startsWith(e+".")){t=!0;break}t||(this.Df("Cleanup delete object %s",e),await v.delObjectAsync(e).catch(P.nop)),await this.wait(10)}}static isLinuxApp(e){return"linux"===c.platform()&&this.exec("!which "+e).then(t=>t.length>=e.length).catch(()=>!1)}}P.Sequence=a,P.CacheP=r,P.HrTime=i,e.exports=P}).call(this,o("4362"))},"56d7":function(e,t,o){"use strict";o.r(t);var r=o("2b0e"),i=(o("d4b8"),o("41e6"),o("f309")),a=o("5607"),n=o("5025"),s=o.n(n),c=o("8807"),l=o.n(c),d=o("da5b"),u=o.n(d),p=o("0fe0"),m=o.n(p),h=o("2992"),f=o.n(h),g=o("eea9"),b=o.n(g),v=o("6202"),y=o.n(v),k=o("18f2"),w=o.n(k),C=o("3afe"),S=o.n(C),_=o("2e15"),j=o.n(_);r["a"].use(i["a"],{directives:{Ripple:a["a"]}});var x=new i["a"]({lang:{locales:{zhHans:s.a,pl:l.a,en:u.a,de:m.a,ru:f.a,pt:b.a,nl:y.a,fr:w.a,it:S.a,es:j.a},current:"en"},icons:{iconfont:"mdi"},icons:{iconfont:"mdi"}}),O=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",[o("v-app-bar",{attrs:{app:"",color:"primary",dark:"",dense:"","elevate-on-scroll":"","scroll-target":"#MyAppContent"}},[o("div",{staticClass:"d-flex align-center"},[o("v-img",{staticClass:"shrink mr-2",attrs:{alt:e.iobrokerAdapter,contain:"",src:e.adapterIcon,width:"35"}}),o("fjB",{staticClass:"text-none",attrs:{href:e.iobrokerReadme,target:"_blank",text:"",img:"mdi-help-circle-outline",tooltip:e.$t("Goto readme for {0}",[e.iobrokerAdapter]),label:e.iobrokerAdapterInstance+" v("+e.iobrokerAdapterCommon.version+")"}}),o("fjB",{attrs:{color:["red","orange","green"][e.adapterStatus],img:["mdi-play-circle","mdi-pause-circle","mdi-pause-octagon"][e.adapterStatus],tooltip:e.adapterStatus?e.$t("stop adapter"):e.$t("start adapter")},on:{click:function(t){return e.enableDisableInstance(!e.adapterStatus)}}}),o("fjB",{attrs:{disabled:!e.adapterStatus,color:"warning",img:"mdi-refresh",tooltip:e.$t("restart adapter")},on:{click:function(t){return e.enableDisableInstance("restart")}}})],1),o("v-tabs",{model:{value:e.page,callback:function(t){e.page=t},expression:"page"}},e._l(e.configTranslated,(function(t){return o("v-tab",{key:t.label,staticClass:"text-none",attrs:{disabled:t.disabled&&!e.devMode}},[t.icon?o("v-icon",{attrs:{left:"",small:""}},[e._v(e._s(t.icon))]):e._e(),o("span",[e._v(e._s(t.label))])],1)})),1),o("v-spacer"),o("fjFileSaveButton",{staticClass:"text-none",attrs:{content:e.iobrokerConfigD(),opts:{type:"JSON",basename:e.iobrokerAdapter+"-config"},icon:"",small:"",text:"",tooltip:e.$t("Download Config JSON or shift-click to copy to clipboard"),img:"mdi-briefcase-download"}}),o("fjFileLoadButton",{staticClass:"text-none",attrs:{text:"",icon:"",small:"",tooltip:e.$t("Upload Config JSON or drop config file here"),img:"mdi-briefcase-upload",message:e.$t("Loaded config!")},on:{onchange:function(t){e.iobrokerConfig=arguments[0]}}}),o("fjB",{staticClass:"text-none",attrs:{text:"",disabled:!e.iobrokerConfigChanged,small:"",label:e.$t("Save"),img:"mdi-content-save",tooltip:e.$t("Save current config")},on:{click:function(t){return t.stopPropagation(),e.saveAdapterConfig(t)}}}),o("fjAlerts",{attrs:{offsetX:0,offsetY:20}}),o("fjB",{staticClass:"text-none",attrs:{text:"",small:"",disabled:!e.iobrokerConfigChanged,dense:"",tooltip:e.$t("Save settings and close config"),label:e.$t("Save&Close"),img:"mdi-content-save-move"},on:{click:function(t){return t.stopPropagation(),e.saveAndClose(t)}}}),o("fjB",{staticClass:"text-none",attrs:{text:"",small:"",dense:"",tooltip:e.$t("cancel and close config"),label:e.$t("Cancel"),img:"mdi-close"},on:{click:function(t){return t.stopPropagation(),e.closeAdapterConfig(t)}}})],1),o("v-main",{staticClass:"flex-wrap",attrs:{id:"MyAppContent"}},[o("fjConfigContainer",{attrs:{cItem:e.iobrokerConfig,configPage:e.configPage}}),o("fjConfirm"),o("fjStateSelector",{model:{value:e.testSel,callback:function(t){e.testSel=t},expression:"testSel"}}),e._v(" "+e._s(e.testSel)+" ")],1)],1)},$=[],I=o("2f62");o("4dd5");r["a"].use(I["a"]);const A=!1,T=window.location.search.slice(1)||"0";let N=window.location.pathname.split("/");N=N[N.length-2]||"broadlink2";const E=(navigator.language||navigator.userLanguage).slice(0,2);var L=new I["a"].Store({state:{iobrokerConfigOrig:"",iobrokerHost:"",iobrokerHostConnection:{},iobrokerLang:E||"en",iobrokerInstance:T,iobrokerConfigFile:{},iobrokerConfig:{},ioBrokerSystemConfig:null,iobrokerAdapter:N,ioBrokerIsTab:!window.location.search,iobrokerPackage:{},iobrokerIoPackage:{},iobrokerAdapterNative:{},iobrokerAdapterCommon:{},ioBrokerCerts:[],iobrokerEnums:{},iobrokerGroups:{},configTranslated:[],socketConnected:!1,iobrokerReadme:"",adapterIcon:"",adapterDebugLevel:"debug",adapterLog:[],adapterStateUpdate:[],adapterStates:{},adapterLastState:{},adapterLastObject:{},interfaces:["0.0.0.0"],socketConnected:!1,iobrokerObjects:{},adapterStatus:0,devMode:A,sstate:{},icons:{},instances:[]},mutations:{iobrokerAdapterNative(e,t){e.iobrokerAdapterNative=t},iobrokerEnums(e,t){e.iobrokerEnums=t},iobrokerGroups(e,t){e.iobrokerGroups=t},iobrokerObjects(e,t){e.iobrokerObjects=t},adapterLog(e,t){e.adapterLog.length>=100&&e.adapterLog.pop(),e.adapterLog.unshift(t)},adapterDebugLevel(e,t){e.adapterDebugLevel=t},adapterLastObject(e,t){e.adapterLastObject=t},adapterStates(e,t){const[o,r]=t;e.adapterLastState=t,r?e.adapterStates[o]=r:delete e.adapterStates[o]},addSState(e,t){const[o,r]=t;if(!r)return void console.log("Please code delete state!");const i=o.split("."),a=o.startsWith("system.adapter.")?i[2]:i[0];if(r.common&&r.common.icon&&(e.icons["adapter"==r.type?a:o]="/adapter/"+a+"/"+r.common.icon),"instance"===r.type&&e.instances.push(i.slice(2).join(".")),"state"===r.type&&!o.startsWith("system.adapter.")){const t=r&&r.common&&r.common.name,i=e.sstate;if(!t)return;const a=i[t];a?Array.isArray(a)?a.indexOf(o)<0&&a.push(o):a!==o&&(i[t]=[a,o]):i[t]=o,e.sstate[o]||(e.sstate[o]=o)}},interfaces(e,t){e.interfaces=t},adapterStateUpdate(e,t){e.adapterStateUpdate=t},adapterStatus(e){const t="system.adapter."+e.iobrokerAdapter+"."+e.iobrokerInstance;let o=e.adapterStates[t+".alive"];o=o&&o.val;let r=e.adapterStates[t+".connected"];return r=r&&r.val,e.adapterStatus=o?r?2:1:0,e.adapterStatus},iobrokerHost(e,t){e.iobrokerHost=t},iobrokerHostConnection(e,t){e.iobrokerHostConnection=t},iobrokerLang(e,t){e.iobrokerLang=t},iobrokerInstance(e,t){e.iobrokerInstance=t},iobrokerConfigFile(e,t){e.iobrokerConfigFile=t,e.adapterIcon=t.icon},iobrokerConfig(e,t){e.iobrokerConfig=t,e.iobrokerConfigOrig=JSON.stringify(t)},ioBrokerSystemConfig(e,t){e.ioBrokerSystemConfig=t},iobrokerAdapter(e,t){e.iobrokerAdapter=t},iobrokerPackage(e,t){e.iobrokerPackage=t},iobrokerIoPackage(e,t){e.iobrokerIoPackage=t},iobrokerAdapterCommon(e,t){e.iobrokerAdapterCommon=t},ioBrokerCerts(e,t){e.ioBrokerCerts=t},configTranslated(e,t){e.configTranslated=t},socketConnected(e,t){e.socketConnected=t},iobrokerReadme(e,t){e.iobrokerReadme=t}},getters:{adapterInstance:e=>e.iobrokerAdapter+"."+e.iobrokerInstance,adapterLastState:e=>e.adapterLastState},actions:{wait(e,t){return t=t||10,new Promise(e=>setTimeout(()=>e(),t))},async SOCKET_connect({commit:e,dispatch:t}){console.log("store socket_connected"),e("socketConnected",!0),await t("wait"),e("iobrokerHostConnection",this._vm.$socket.io.opts),await t("wait"),await t("loadIobrokerObjects"),await t("wait"),t("loadInterfaces")},SOCKET_disconnect({commit:e}){console.log("store socket_disconnected"),e("socketConnected",!1)},SOCKET_reconnect({commit:e}){console.log("store socket_reconnected"),e("socketConnected",!0)},SOCKET_log({commit:e,getters:t},o){o.from==t.adapterInstance&&e("adapterLog",o)},SOCKET_stateChange({commit:e,state:t,getters:o},r){const[i,a]=r,n=o.adapterInstance+".";(i.startsWith(o.adapterInstance)||i.startsWith("system.adapter."+o.adapterInstance))&&(i=="system.adapter."+n+"logLevel"&&e("adapterDebugLevel",r.val),i.startsWith("system.")||e("adapterStateUpdate",r),e("adapterStates",r),i.startsWith("system.adapter."+o.adapterInstance)&&e("adapterStatus"))},SOCKET_onUpdate({commit:e,state:t,getters:o},r){const[i,a]=r;i.indexOf(o.adapterInstance+".")<0||console.log("store onUpdate",i,a)},SOCKET_objectChange({commit:e,state:t,getters:o},r){const[i,a]=r,n=o.adapterInstance;e("addSState",r),(i.startsWith(o.adapterInstance+".")||i.startsWith("system.adapter."+n))&&e("adapterLastObject",r)},async loadConfigFile({commit:e,state:t,dispatch:o}){let r=null;try{r=await fetch("./config.json").then(e=>e.json()).catch(e=>(console.log("config.json fetch err",e),null))}catch(i){console.log("config.json fetch err",i)}r&&(e("iobrokerConfigFile",r),o("setAdapterReadme"))},async loadInterfaces({commit:e,state:t,dispatch:o}){const i=t.iobrokerAdapterCommon&&t.iobrokerAdapterCommon.host||null,a=(await r["a"].prototype.$socketSendTo("getHostByIp","192.168.178.111").catch(e=>console.log("error:",e),null),await r["a"].prototype.$socketSendTo("sendToHost",i,"getInterfaces","IPv4").catch(e=>console.log("error:",e),null)),n=["0.0.0.0"];if(a&&a.result)for(const r of Object.entries(a.result)){const[e,t]=r;for(const o of t)o.internal||"IPv4"!==o.family||n.push(o.address)}e("interfaces",n)},async loadIobrokerObjects({commit:e,state:t,dispatch:o},i){const a=`${t.iobrokerAdapter}.${t.iobrokerInstance}.`,n=r["a"].prototype.$socketEmit;let s=await n("subscribeStates",a+"*").catch(e=>console.log("SubscribeStates error:",e),null)||{};s=await n("subscribeObjects",a+"*").catch(e=>console.log("SubscribeObjects error:",e),null)||{},s=await n("getObjects").catch(e=>console.log("getForeignObjects error:",e),null)||{};const c={};if(s){e("iobrokerObjects",s);for(const t of Object.entries(s)){const[o,r]=t;if(o.startsWith(a)&&e("addSState",t),"enum"!==r.type)continue;const i=r.common&&r.common.members||[];for(const e of i){const t=c[e]||[];t.length||(c[e]=t),t.push(o)}}for(const t of Object.entries(s))t[0].startsWith(a)||e("addSState",t);e("iobrokerEnums",c)}await o("wait");const l=await n("getStates").catch(e=>console.log("getStates error:",e),null)||{};for(const r of Object.entries(l)){const[t,o]=r;t.startsWith(a)&&o&&e("adapterStates",r)}return s},setAdapterReadme({commit:e,state:t},o){let{lang:r,common:i}=o||{};if(r=r||t.iobrokerLang,i=i||t.iobrokerAdapterCommon,!r||!i||!i.readme)return i&&i.readme&&e("iobrokerReadme",i.readme),i.readme;let a=i.readme;const n=t.iobrokerConfigFile.readme;return a=n&&n[r]?a.replace("README.md",n[r]):`https://translate.google.com/translate?sl=auto&tl=${r}&u=${encodeURIComponent(a)}`,e("iobrokerReadme",a),a}},modules:{}});function P(e,t){t=t||0,e<9466812e5&&(e*=1e3);var o="",r=new Date;if(!e)return"";("string"===typeof e||"number"===typeof e)&&(e=new Date(e));var i=(r.getTime()-e.getTime())/1e3;if(t&&i/3600>t)return"";if(i<5)o=translate("just now");else if(i<=60)o=translate("${1} seconds ago",Math.floor(i));else if(i<=3600)o=translate("for ${1} min ${2} seconds.",Math.floor(i/60),Math.floor(i%60));else if(i<=86400){var a=Math.floor(i/3600);o=1===a||21===a?translate("for1Hour",a,Math.floor(i/60)%60):a>=2&&a<=4?translate("for2-4Hours",a,Math.floor(i/60)%60):translate("forHours",a,Math.floor(i/60)%60)}else i>86400&&i<=172800?o=translate("yesterday"):i>172800&&(o=translate("for ${1} hours",Math.floor(i/3600)));return o}r["a"].filter("ago",(e,t)=>P(e,t));(navigator.language||navigator.userLanguage).slice(0,2);const V={computed:{adapterStatus(){return this.$store.state.adapterStatus},adapterLastState(){return this.$store.state.adapterLastState},interfaces(){return this.$store.state.interfaces},adapterLog(){return this.$store.state.adapterLog},iobrokerConfigOrig:{get(){return this.$store.state.iobrokerConfigOrig}},iobrokerIsTab(){return this.$store.state.ioBrokerIsTab},iobrokerEnums:{get(){return this.$store.state.iobrokerEnums},set(e){this.$store.commit("iobrokerEnums",e)}},iobrokerGroups:{get(){return this.$store.state.iobrokerGroups},set(e){this.$store.commit("iobrokerGroups",e)}},adapterDebugLevel:{get(){return this.$store.state.adapterDebugLevel},set(e){this.$store.commit("adapterDebugLevel",e)}},iobrokerHost:{get(){return this.$store.state.iobrokerHost},set(e){this.$store.commit("iobrokerHost",e)}},iobrokerHostConnection:{get(){return this.$store.state.iobrokerHostConnection},set(e){this.$store.commit("iobrokerHostConnection",e)}},iobrokerHostPath(){const e=this.iobrokerHostConnection;return(e.secure?"https://":"http://")+e.hostname+":"+e.port},iobrokerLang:{get(){return this.$store.state.iobrokerLang},set(e){this.$store.commit("iobrokerLang",e),this.$vuetify.lang.current=e.startsWith("zh")?"zhHans":e}},debugLevel:{get(){return"debug"==this.adapterDebugLevel},set(e){const t="debug"==this.iobrokerAdapterCommon.loglevel?"info":this.iobrokerAdapterCommon.loglevel;this.adapterDebugLevel=e?"debug":t,this.sendTo(null,"debug",e)}},iobrokerInstance:{get(){return this.$store.state.iobrokerInstance},set(e){this.$store.commit("iobrokerInstance",e)}},iobrokerConfigFile:{get(){return this.$store.state.iobrokerConfigFile},set(e){this.$store.commit("iobrokerConfigFile",e)}},iobrokerConfig:{get(){return this.$store.state.iobrokerConfig},set(e){this.$store.commit("iobrokerConfig",JSON.parse(this.myStringify(e)))}},ioBrokerSystemConfig:{get(){return this.$store.state.ioBrokerSystemConfig},set(e){this.$store.commit("ioBrokerSystemConfig",e)}},iobrokerAdapter:{get(){return this.$store.state.iobrokerAdapter},set(e){this.$store.commit("iobrokerAdapter",e)}},iobrokerPackage:{get(){return this.$store.state.iobrokerPackage},set(e){this.$store.commit("iobrokerPackage",e)}},iobrokerIoPackage:{get(){return this.$store.state.iobrokerIoPackage},set(e){this.$store.commit("iobrokerIoPackage",e)}},iobrokerAdapterCommon:{get(){return this.$store.state.iobrokerAdapterCommon},set(e){this.$store.commit("iobrokerAdapterCommon",e)}},iobrokerAdapterNative:{get(){return this.$store.state.iobrokerAdapterNative},set(e){this.$store.commit("iobrokerAdapterNative",e)}},ioBrokerCerts:{get(){return this.$store.state.ioBrokerCerts},set(e){this.$store.commit("ioBrokerCerts",e)}},configTranslated:{get(){return this.$store.state.configTranslated},set(e){this.$store.commit("configTranslated",e)}},socketConnected:{get(){return this.$store.state.socketConnected},set(e){this.$store.commit("socketConnected",e)}},iobrokerReadme:{get(){return this.$store.state.iobrokerReadme},set(e){this.$store.commit("iobrokerReadme",e)}},adapterIcon:{get(){return this.$store.state.adapterIcon}},devMode:{get(){return this.$store.state.devMode},set(e){this.$store.commit("devMode",e)}},ioBrokerCompareConfig(){return this.myStringify(this.iobrokerConfig)},iobrokerConfigChanged(){return this.iobrokerConfigOrig!=this.ioBrokerCompareConfig},iobrokerAdapterInstance(){return this.iobrokerAdapter+"."+this.iobrokerInstance}},watch:{iobrokerConfigFile:{handler:function(){this.translateConfig(this.iobrokerConfigFile)},deep:!0},async iobrokerLang(e){await this.setAdapterReadme({lang:e})},async iobrokerAdapterCommon(e){await this.setAdapterReadme({common:e})}},async created(){this.$i18n.locale=this.iobrokerLang,await this.loadConfigFile()},beforeMount(){this.iobrokerHostConnection=this.$socket.io.opts,this.$socket.connected&&!this.ioBrokerSystemConfig&&this.loadSystemConfig()},async mounted(){const e="system.adapter."+this.iobrokerAdapterInstance,t=await this.$socketEmit("getObject",e);t?(this.iobrokerConfig=t.native,this.iobrokerAdapterNative=t,t.common&&(this.iobrokerAdapterCommon=t.common,this.$store.commit("iobrokerHost",t.common.host)),await this.wait(10),this.$forceUpdate()):console.log(`No Adapterconfig received for ${e}!`);const o=await this.$socketEmit("getState",e+".logLevel").catch(e=>null);o&&(this.adapterDebugLevel=o.val),await this.wait(5),this.setAdapterReadme(this.iobrokerLang,this.iobrokerAdapterCommon),await this.wait(20);const r=await this.getGroups();this.iobrokerGroups=r},methods:{...Object(I["b"])(["loadConfigFile","setAdapterReadme","loadBroadlinkConfig","loadInterfaces"]),translateConfig(e){const t=this;function o(e){const r={};if(e._translated)Object.assign(r,e);else for(const[i,a]of Object.entries(e))switch(i){case"label":case"text":case"html":case"tooltip":case"placeholder":case"hint":Array.isArray(a)?r[i]=a.map(e=>e.startsWith("!")?e.slice(1):t.$t(e)).join(" "):r[i]=a.startsWith("!")?a.slice(1):t.$t(a);break;case"items":r[i]=Array.isArray(a)?a.map(e=>o(e)):a;break;default:r[i]=a;break}return r._translated=!0,r}const r=e&&e.configTool;if(!r)return[];this.iobrokerAdapterCommon;const i=e&&e.translation,a=this.copyObject(r&&r.length?r:[]);if(i){const e=this.copyObject(this.$i18n.messages),t=this.$i18n.loadLocaleMessages(i,e);for(const o of Object.keys(t))this.$i18n.setLocaleMessage(o,t[o])}this.$set(this,"configTranslated",[]);for(const n of a)!this.devMode&&n.devOnly||this.configTranslated.push(o(n));return this.configTranslated},async sendTo(e,t,o){return this.$socketSendTo("sendTo",e||this.iobrokerAdapterInstance,t,o)},async sendToHost(e,t,o){return this.$socketSendTo("sendToHost",e||this.iobrokerAdapterCommon.host,t,o)},async getHost(e){e=e||this.iobrokerAdapterCommon.host;const t=await this.$socketEmit("getHostByIp",e).then(e=>this.iobrokerHost=e,e=>null);return t},getLocalTime(e){const t=new Date(e||Date.now()),o=t.getTimezoneOffset();return new Date(t.getTime()-60*o*1e3).toISOString()},iobrokerConfigD(){const e=this.copyObject(this.iobrokerConfig);return e._adapter_info_={time:this.getLocalTime(),instance:this.iobrokerAdapterInstance,version:this.iobrokerAdapterCommon.version,host:this.iobrokerAdapterCommon.host},e},async enableDisableInstance(e,t){t=t||this.iobrokerAdapterInstance,t.startsWith("system.adapter.")||(t="system.adapter."+t);const o=this.adapterDebugLevel?{common:{loglevel:this.adapterDebugLevel}}:{common:{}};"boolean"==typeof e&&(o.common.enabled=!!e),await this.$socketEmit("extendObject",t,o).catch(o=>this.$alert(`error:Set ${t} to enabled=${!!e} error: ${o}`))},async saveAdapterConfig(e){const t=this.copyObject(this.iobrokerConfig),o="system.adapter."+this.iobrokerAdapterInstance,r=await this.$socketEmit("getObject",o).catch(e=>null)||{};if(!r.native)return!1;for(var i of Object.getOwnPropertyNames(t))i&&"_adapter_info_"!=i&&(r.native[i]=t[i]);if(e)for(var a in Object.getOwnPropertyNames(e))r.common[a]=e[a];return await this.$socketEmit("setObject",o,r).then(()=>this.$alert(this.$t("config saved")),e=>this.$alert(`error:${this.$t("Save config error")} ${e}`)),this.iobrokerConfig=t,await this.wait(10),!0},async saveAndClose(e){await this.saveAdapterConfig(null),await this.closeAdapterConfig(e)},async closeAdapterConfig(e){function t(){if("undefined"!==typeof parent&&parent)try{parent.$iframeDialog&&"function"===typeof parent.$iframeDialog.close?parent.$iframeDialog.close():parent.postMessage("close","*")}catch(e){parent.postMessage("close","*")}}if(e.altKey&&e.shiftKey)return this.$copyText(JSON.stringify(this.$missing,null,2)),this.$alert(this.$t("Missing words saved to clipboard!"));const o=!this.iobrokerConfigChanged||await this.$confirm("okColor=error darken-2|"+this.$t("Really exit without saving?"));return o&&(this.devMode?this.$alert("would close now "+o):t()),o},async getObject(e){return await this.$socketEmit("getObject",e).then(e=>e,t=>(console.log("getObject err:",e,t),null))},async getState(e){const t=this.adapterStates;return t[e]?t[e]:this.$socketEmit("getState",e).then(t=>(this.$store.commit("adapterStates",[e,t]),t),e=>(console.log(e),null))},async getEnums(e){return e=e||"",this.$socketEmit("getObjectView","system","enum",{startkey:"enum."+e,endkey:"enum."+e+"香"}).then(t=>{for(var o={},r=0;r<t.rows.length;r++)t.rows[r].id!=="enum."+e&&(o[t.rows[r].id]=t.rows[r].value);return o},e=>(console.log(e),[]))},async getGroups(){return this.$socketEmit("getObjectView","system","group",{startkey:"system.group.",endkey:"system.group.香"}).then(e=>{for(var t={},o=0;o<e.rows.length;o++)t[e.rows[o].id]=e.rows[o].value;return t},e=>(console.log(e),[]))},async getUsers(){return this.$socketEmit("getObjectView","system","user",{startkey:"system.user.",endkey:"system.user.香"}).then(e=>{for(var t={},o=0;o<e.rows.length;o++)t[e.rows[o].id]=e.rows[o].value;return t},e=>(console.log(e),[]))},async getAdapterInstances(e){return e=e||this.iobrokerAdapter,this.$socketEmit("getObjectView","system","instance",{startkey:"system.adapter."+e,endkey:"system.adapter."+e+".香"}).then(e=>{for(var t=[],o=0;o<e.rows.length;o++)t.push(e.rows[o].value);return t},e=>(console.log(e),[]))},async getExtendableInstances(e){return e=e||this.iobrokerAdapter,this.$socketEmit("getObjectView","system","instance",null).then(e=>{for(var t=[],o=0;o<e.rows.length;o++)e.rows[o].value.common.webExtendable&&t.push(e.rows[o].value);return t},e=>(console.log(e),[]))},async loadSystemConfig(){const e=this;async function t(){let t=await e.$socketEmit({event:"system.config",timeout:1e3}).then(e=>e,e=>null);if(!t||!t.common)return Promise.reject(null);if(e.ioBrokerSystemConfig=t,e.iobrokerLang=t.common.language||e.iobrokerLang,e.$i18n.locale=e.iobrokerLang,t=await e.$socketEmit({event:"system.certificates",timeout:1e3}).then(e=>e,e=>null),t&&t.native&&t.native.certificates)for(var o in e.ioBrokerCerts=[],t.native.certificates)if(t.native.certificates.hasOwnProperty(o)&&t.native.certificates[o])if(t.native.certificates[o].length<700&&(-1!==t.native.certificates[o].indexOf("/")||-1!==t.native.certificates[o].indexOf("\\"))){var r={name:o,type:""};-1!==o.toLowerCase().indexOf("private")||-1!==t.native.certificates[o].toLowerCase().indexOf("private")?r.type="private":(-1!==o.toLowerCase().indexOf("public")||-1!==t.native.certificates[o].toLowerCase().indexOf("public"))&&(r.type="public"),e.ioBrokerCerts.push(r)}else{var i={name:o,type:"-----BEGIN RSA PRIVATE KEY"===t.native.certificates[o].substring(0,"-----BEGIN RSA PRIVATE KEY".length)||"-----BEGIN PRIVATE KEY"===t.native.certificates[o].substring(0,"-----BEGIN PRIVATE KEY".length)?"private":"public"};if("public"===i.type){for(var a=t.native.certificates[o].split("-----END CERTIFICATE-----"),n=0,s=0;s<a.length;s++)a[s].replace(/\r\n|\r|\n/,"").trim()&&n++;n>1&&(i.type="chained")}e.ioBrokerCerts.push(i)}return e.ioBrokerSystemConfig}let o=10;while(o)try{o--;const e=await t();return e}catch(r){}return console.log("Could not load System config after 10 trials!"),null}}};var z=V;const D={extends:z,computed:{iobrokerObjects(){return this.$store.state.iobrokerObjects},adapterStates(){return this.$store.state.adapterStates},adapterStateUpdate(){return this.$store.state.adapterStateUpdate},adapterLastObject(){return this.$store.state.adapterLastObject},interfaces(){return this.$store.state.interfaces},sStates(){return this.$store.state.sstate},icons(){return this.$store.state.icons},instances(){return this.$store.state.instances},stateNames(){const e=this.sStates,t=[];for(const o in e)"string"===typeof e[o]&&t.push(o);return t},broadlinkDevices(){function e(e){const{_id:t,common:o,native:r}=e,i=e?{$id:t,$native:r}:{};return o&&o.name&&(i.$name=o.name),i}const t=Object.assign({},this.$store.state.iobrokerObjects),o={},r=this.iobrokerAdapterInstance;for(const i of Object.entries(t)){const[t,a]=i;if(t.startsWith(r)<0)continue;let n=t.split(".");n=n.slice(2);const s=n[0],c=e(a);if(1===n.length)o[s]=c;else{o[s]||(o[s]=c);let t=c;for(let e=n.length-1;e>=1;e--)t={[n[e]]:t};let r=o[s];for(let o=1;o<n.length;o++){const t=n[o];if(!r[t]||o==n.length-1){let i=o==n.length-1&&c.$name?c.$name:t;i.startsWith(r.$name+".")&&(i=i.slice(r.$name.length+1)),r[i]=o==n.length-1?e(a):{}}r=r[t]}}}return o}},watch:{adapterStateUpdate(e,t){const[o,r]=e,i=o.split(".")[2],a=this.$store.state.iobrokerConfig,n=a&&a.devList||[];if(r){if(o.endsWith("._NewDeviceScan"))this.$alert("info:Device Scan "+(r.val?"Started":"Stopped"));else if(o.endsWith("._notReachable")){const e=n.find(e=>e.name==i);e&&this.$set(e,"active",!r.val)}}else if(o.endsWith("._notReachable")){const e=n.find(e=>e.name==i);e&&this.$set(e,"active",!1)}},broadlinkDevices:{handler:function(){this.loadDevList()},deep:!0},adapterLastObject(e){const[t,o]=e;3==t.split(".").length&&o&&o.native&&o.native.host&&this.addDevice(o.native.host,t.split(".")[2])}},methods:{async addDevice(e,t){const o=this;async function r(e){const t=o.iobrokerAdapterInstance+"."+e+"._notReachable";let r=o.adapterStates[t];return r||(r=o.getState(t),r&&o.$set(o.adapterStates,t,r)),r&&!r.val}const i=this.$store.state.iobrokerConfig;Array.isArray(i.devList)&&i.devList.length||this.$set(i,"devList",[]);const a=i.devList,{address:n,mac:s,devname:c,devhex:l,oname:d,names:u,type:p,fware:m,cloud:h}=e;if(t=t||c,parseInt(n.split(".")[3])<110)return;const f=a.find(e=>e.mac==s)||a.find(e=>e.ip==n),g=`${p.toUpperCase()}:${c}, id=${l}, netnames=${u&&u.join("; ")||d}${m?", v"+m.toString():""}${h?", cloud":""}`,b=await r(t);f?(f.mac=f.mac||s,f.ip=f.ip||n,f.info=f.info||g,f.active=b):a.push({name:t,ip:n,mac:s.toLowerCase(),info:g,active:b})},async loadDevList(){await this.wait(100);const e=this.$store.state.iobrokerConfig;Array.isArray(e.devList)&&e.devList.length||this.$set(e,"devList",[]);const t=e.devList;for(const o of t)o.mac.match(/[A-Z]/)&&this.$set(o,"mac",o.mac.toLowerCase());for(const o of Object.entries(this.broadlinkDevices)){const[e,t]=o;t.$native&&t.$native.host&&await this.addDevice(t.$native.host,e)}await this.wait(20)}}};var F=D,B=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e._v(" "+e._s(e.items.map((function(e){return e.$id})))+" "),o("br"),e._v(" "+e._s(e.active.map((function(e){return e.$id})))+" "),o("br"),e._v(" "+e._s(e.open.map((function(e){return e.name+"="+e.id})))+" "),o("br"),o("v-btn",{attrs:{small:""},on:{click:function(t){t.stopPropagation(),e.smenu=!e.smenu}}},[e._v(" "+e._s(e.smenu?"Listview":"Treeview"))]),o("v-text-field",{staticStyle:{width:"550px"},attrs:{dense:"",label:"filter",clearable:"",filled:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),o("v-card",{staticClass:"px-2 py-1",staticStyle:{"max-width":"600px","max-height":"500px","overflow-y":"auto"},attrs:{outlined:""}},[e.smenu?o("v-treeview",{attrs:{items:e.treeView,active:e.active,open:e.open,dense:"",search:e.search,filter:e.customFilter,activatable:"",hoverable:"","return-object":""},on:{"update:active":function(t){e.active=t},"update:open":function(t){e.open=t}},scopedSlots:e._u([{key:"prepend",fn:function(e){var t=e.item;return[o("fjAvatar",{attrs:{icon:t.icon,size:"28",tile:""}})]}},{key:"label",fn:function(t){var o=t.item;return[e._v(" "+e._s(o.name)+" "),o&&o.nname&&!o.name.endsWith(o.nname)?[e._v("("+e._s(o.nname)+")")]:e._e()]}},{key:"append",fn:function(t){var o=t.item;return[o.isState&&e.customFilter(o,e.search)?[e._v(e._s(o.cname)+" = "+e._s(o.value))]:e._e()]}}],null,!1,325581701),model:{value:e.tree,callback:function(t){e.tree=t},expression:"tree"}}):o("v-virtual-scroll",{attrs:{items:e.filtered,"item-height":48,height:"490"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.item;return[o("v-list-item",{on:{click:function(t){return e.selectVs(r)}}},[o("v-list-item-avatar",[o("fjAvatar",{attrs:{icon:r.icon,size:"28",tile:""}})],1),o("v-list-item-content",[o("v-list-item-title",[e._v(e._s(r.cname)+" = "+e._s(r.value))]),o("v-list-item-subtitle",{domProps:{textContent:e._s(r.id)}})],1)],1)]}}])})],1)],1)},M=[],R={name:"fjStateSelector",data(){return{myStates:[],tree:[],active:[],treeView:[],search:"",open:[],mitems:[],smenu:!0,dispTree:!0}},props:{value:{type:Array,default:()=>[]},label:{type:String,default:()=>"Select State"}},created(){this.mitems=this.value},async mounted(){await this.wait(2e3),this.genTree()},computed:{items:{get(){return this.mitems},set(e){console.log("Set items",this.mitems,e),this.$set(this,"mitems",[e]),this.$emit("input",this.mitems)}},language(){return this.$app.iobrokerLang},filtered(){const e=this.myStates,t=e.filter(e=>this.customFilter(e,this.search));return t}},methods:{selectVs(e){console.log("selectVs",e)},getName(e){const t=this.language,o=this.$app.iobrokerObjects[e],r=o&&o.common&&o.common.name;return r?"string"===typeof r?r:"object"!==typeof r?null:r[t]?r[t]:r["en"]:e},async getAState(e){const t=await this.$app.getState(e.id).catch(e=>{});e.value=t&&"object"===typeof t?t.val:void 0},genTree(e){const t=this.$store.state.sstate,o=(this.tree,[]),r=[];e=e||"";for(const i of Object.entries(t)){const[t,a]=i,n=Array.isArray(a)?a:[a];for(const i of n){if(i&&!i.startsWith(e))continue;const a=i.split(".");a.length>=2&&!isNaN(parseInt(a[1]))&&a.splice(0,2,a[0]+"."+a[1]);let n,s=o,c="",l="";for(const e of a){s||(s=n.children),s||(s=n.children=[]),c+=c?"."+e:e;const o=this.$app.iobrokerObjects[i],a=o&&o.common,d=this.getName(c).split(".").slice(-1)[0];l+=l?"."+d:d;const u=s.find(t=>t.name===e);if(u)n=u;else{const u={type:o&&o.type,role:a&&a.role,name:e,id:c,$id:i,cname:t,$name:this.getName(i),nname:d,idnn:l,isState:c===i};u.icon=this.getIcon(i),n=u,u.isState&&(r.push(u),this.getAState(u)),s.push(u)}s=n.children}}}return this.$set(this,"myStates",r),this.$set(this,"treeView",o),o},getIcon(e){const t=this.$store.state.icons,o=e.split("."),r=this.$app.devMode?this.$app.iobrokerHostPath:"";let i;while(o.length){if(t[o.join(".")]){i=t[o.join(".")];break}e=o.pop()}if(!i){if("scene"===e)e="scenes";else if("system"===e)return"mdi-cog";i=t[e]}return i=i?r+i:"mdi-heart-box",i},customFilter(e,t){function o(t){for(const o of Object.entries(e)){const e=o[1];if("value"===o[0])continue;const r="string"===typeof e?e.toLowerCase():"";if(r.indexOf(t)>-1)return!0}return!1}if(!e||!t||"string"!==typeof e.id||"string"!==typeof e.name)return!0;const r=t.toLowerCase().trim();function i(e,t){if("string"!==typeof e)return[];const o=e.split(t).map(e=>e.trim());if(!o.length)return[];if(1===o.length)return o[0]?[o[0]]:[];const r=[];let i="";" "===t&&(t="");for(const a of o)a&&r.push(i+a),i=t;return r}let a=i(r," "),n=[];for(const d in a)n.push(i(a[d],"+"));a=[].concat.apply([],n),n=[];for(const d in a)n.push(i(a[d],"-"));a=[].concat.apply([],n);let s,c=!1,l=!0;for(const d of a){if("string"!==typeof d)continue;let e=d;e.startsWith("+")?(e=e.slice(1),s="+"):e.startsWith("-")&&(e=e.slice(1),s="-");const t=o(e);if("-"===s&&t)return!1;if("+"===s&&!t)return!1;c=c||t,l=!1}return c},remove(e){console.log("clicked remove with",e,this.value);const t=this.value;let o;for(o=0;o<t.length;o++)if(t[o].name===e.name)break;o<t.length&&t.splice(o,1)}},watch:{"$store.state.sstate"(e){this.$nextTick(()=>{this.genTree(),this.$forceupdate()})},active(e){e.length&&!e[0].isState&&e.splice(0,1)},open(e,t){while(e.length){let t;const o=e[0].id;for(t=0;t<e.length;t++)if(e.length>t+1&&!e[t+1].id.startsWith(o))break;if(!(t+1<e.length))break;e.splice(0,t+1)}}}},W=R,J=o("2877"),H=o("6544"),U=o.n(H),q=o("8336"),K=o("b0af"),G=o("da13"),Y=o("8270"),Z=o("5d23"),X=o("8654"),Q=o("eb2a"),ee=o("0de5"),te=Object(J["a"])(W,B,M,!1,null,null,null),oe=te.exports;U()(te,{VBtn:q["a"],VCard:K["a"],VListItem:G["a"],VListItemAvatar:Y["a"],VListItemContent:Z["a"],VListItemSubtitle:Z["b"],VListItemTitle:Z["c"],VTextField:X["a"],VTreeview:Q["a"],VVirtualScroll:ee["a"]}),r["a"].component("fjStateSelector",oe);var re={name:"App",mixins:[F],data:()=>({page:-1,configPage:{items:[]},markRed:"",testSel:[]}),created(){r["a"].prototype.$app=this},async beforeMount(){this.page=0,this.iobrokerLang=this.iobrokerLang||"en",await this.wait(10),await this.loadDevList(),await this.wait(10),this.makeConfigPage(0),await this.wait(10)},methods:{makeConfigPage(e){const t=Object.assign({},this.copyObject(this.configTranslated[e]||{}));this.configPage={};const o=t.items;return this.$set(this.configPage,"page",e),this.$set(this.configPage,"items",o),this.configPage}},watch:{page(e){this.wait(10).then(()=>this.makeConfigPage(Number(e)))},configTranslated:{handler:function(){this.wait(10).then(()=>this.makeConfigPage(Number(this.page)))},deep:!0}}},ie=re,ae=(o("4907"),o("7496")),ne=o("40dc"),se=o("132d"),ce=o("adda"),le=o("f6c4"),de=o("2fa4"),ue=o("71a3"),pe=o("fe57"),me=Object(J["a"])(ie,O,$,!1,null,null,null),he=me.exports;U()(me,{VApp:ae["a"],VAppBar:ne["a"],VIcon:se["a"],VImg:ce["a"],VMain:le["a"],VSpacer:de["a"],VTab:ue["a"],VTabs:pe["a"]});var fe=o("a925");const ge={"Goto readme for {0}":{en:"Open readme for {0}",ru:"Откройте README для {0}",pt:"Abra o arquivo readme para {0}",nl:"Open readme voor {0}",fr:"Ouvrir le fichier lisezmoi pour {0}",it:"Aprire il file leggimi per {0}",es:"Abra el archivo léame para {0}",pl:"Otwórz plik README dla {0}","zh-cn":"转到{0}的自述文件",de:"Öffne readme-Datei für {0}"},"Download Config JSON or shift-click to copy to clipboard":{en:"Download Config JSON or shift-click to copy to clipboard",de:"Laden Sie Config JSON herunter oder klicken Sie bei gedrückter Umschalttaste, um es in die Zwischenablage zu kopieren",ru:"Скачать Config JSON или Shift-клик, чтобы скопировать в буфер",pt:"Faça o download do Config JSON ou clique com a tecla Shift pressionada para copiar para a área de transferência",nl:"Download Config JSON of shift-klik om naar het klembord te kopiëren",fr:"Téléchargez Config JSON ou Maj-clic pour copier dans le presse-papiers",it:"Scarica Config JSON o fai clic tenendo premuto Maiusc per copiare negli appunti",es:"Descargue Config JSON o presione Mayús y haga clic para copiar al portapapeles",pl:"Pobierz Config JSON lub kliknij, przytrzymując klawisz Shift, aby skopiować do schowka","zh-cn":"下载Config JSON或按住Shift键单击以复制到剪贴板"},"Upload Config JSON or drop config file here":{en:"Upload Config JSON or drop config file here",de:"Laden Sie Config JSON hoch oder legen Sie die Konfigurationsdatei hier ab",ru:"Загрузите Config JSON или сбросьте конфигурационный файл здесь",pt:"Carregue o JSON de configuração ou solte o arquivo de configuração aqui",nl:"Upload Config JSON of zet het configuratiebestand hier neer",fr:"Téléchargez Config JSON ou déposez le fichier de configuration ici",it:"Carica Config JSON o rilascia qui il file di configurazione",es:"Cargue Config JSON o suelte el archivo de configuración aquí",pl:"Prześlij Config JSON lub upuść plik konfiguracyjny tutaj","zh-cn":"在此处上传配置JSON或删除配置文件"},"Loaded config!":{en:"Loaded config!",de:"Geladene Konfiguration!",ru:"Загруженный конфиг!",pt:"Configuração carregada!",nl:"Geladen configuratie!",fr:"Config chargée!",it:"Configurazione caricata!",es:"¡Configuración cargada!",pl:"Załadowana konfiguracja!","zh-cn":"加载配置！"},Save:{en:"Save",de:"Speichern",ru:"Сохранить",pt:"Salve ",nl:"Opslaan",fr:"Sauver",it:"Salva",es:"Salvar",pl:"Zapisać","zh-cn":"救"},"Save current config":{en:"Save current config",de:"Aktuelle Konfiguration speichern",ru:"Сохранить текущий конфиг",pt:"Salvar configuração atual",nl:"Bewaar huidige configuratie",fr:"Enregistrer la configuration actuelle",it:"Salva la configurazione corrente",es:"Guardar configuración actual",pl:"Zapisz bieżącą konfigurację","zh-cn":"保存当前配置"},"Save settings and close config":{en:"Save settings and close config",de:"Speichern Sie die Einstellungen und schließen Sie die Konfiguration",ru:"Сохранить настройки и закрыть конфигурацию",pt:"Salvar configurações e fechar configurações",nl:"Instellingen opslaan en configuratie sluiten",fr:"Enregistrer les paramètres et fermer la configuration",it:"Salva le impostazioni e chiudi la configurazione",es:"Guardar configuración y cerrar configuración",pl:"Zapisz ustawienia i zamknij konfigurację","zh-cn":"保存设置并关闭配置"},"Save&Close":{en:"Save&Close",de:"Speichern&schließen",ru:"Сохранить и Закрыть",pt:"Salvar fechar",nl:"Opslaan en sluiten",fr:"Sauvegarder et fermer",it:"Salva e chiudi",es:"Guardar cerrar",pl:"Zapisz i zamknij","zh-cn":"保存并关闭"},"cancel and close config":{en:"cancel and close config",de:"Konfiguration abbrechen und schließen",ru:"отменить и закрыть конфигурацию",pt:"cancelar e fechar configuração",nl:"annuleer en sluit configuratie",fr:"annuler et fermer la configuration",it:"annulla e chiudi config",es:"cancelar y cerrar config",pl:"anuluj i zamknij konfigurację","zh-cn":"取消并关闭配置"},Cancel:{en:"Cancel",de:"Stornieren",ru:"Отмена",pt:"Cancelar",nl:"annuleren",fr:"Annuler",it:"Annulla",es:"Cancelar",pl:"Anuluj","zh-cn":"取消"},Config:{en:"Config",de:"Konfig",ru:"конфиг",pt:"Config",nl:"Config",fr:"Config",it:"config",es:"Config",pl:"Config","zh-cn":"设定档"},Yes:{en:"Yes",de:"Ja",ru:"да",pt:"sim",nl:"Ja",fr:"Oui",it:"sì",es:"si",pl:"tak","zh-cn":"是"},No:{en:"No",de:"Nein",ru:"нет",pt:"Não",nl:"Nee",fr:"Non",it:"No",es:"No",pl:"Nie","zh-cn":"没有"},"Please confirm:":{en:"Please confirm:",de:"Bitte bestätigen:",ru:"Пожалуйста подтвердите:",pt:"Por favor confirme:",nl:"Bevestig alstublieft:",fr:"Veuillez confirmer:",it:"Si prega di confermare:",es:"Por favor confirmar:",pl:"Proszę potwierdzić:","zh-cn":"请确认："},"Really exit without saving?":{en:"Really exit without saving?",de:"Wirklich ohne speichern verlassen?",ru:"На самом деле выйти без сохранения?",pt:"Realmente sair sem salvar?",nl:"Echt verlaten zonder op te slaan?",fr:"Vraiment quitter sans enregistrer?",it:"Davvero uscire senza salvare?",es:"Realmente salir sin guardar?",pl:"Faktycznie wyjść bez zapisywania?","zh-cn":"真的退出而不保存吗？"},"Missing words saved to clipboard!":{en:"Missing words saved to clipboard!",de:"Fehlende Wörter gespeichert, in die Zwischenablage!",ru:"Недостающие слова, сохраненные в буфер обмена!",pt:"Faltam palavras guardadas para a área de transferência!",nl:"Ontbrekende woorden opgeslagen op het klembord!",fr:"Manque les mots enregistrés dans le presse-papiers!",it:"Parole mancanti salvato negli appunti!",es:"Palabras que faltan guardado en el portapapeles!",pl:"Brakujące słowa, zapisane w schowku!","zh-cn":"遗漏的字词已保存到剪贴板！"},"Save config error":{en:"Save config error",de:"Save config Fehler",ru:"Ошибка сохранения конфигурации ",pt:"Salvar erro de config.",nl:"Save config-fout",fr:"Enregistrer les messages d'erreur de configuration",it:"Save config di errore",es:"Guardar config error",pl:"Błąd zapisu konfiguracji ","zh-cn":"保存配置错误"},"config saved":{en:"config saved",de:"config gespeichert",ru:"конфиг сохраняется",pt:"config salvo",nl:"config opgeslagen",fr:"config enregistré",it:"config salvato",es:"config guardada",pl:"konfig jest zapisywany","zh-cn":"配置已保存"},"Do you really want to delete item":{en:"Do you really want to delete item",de:"Wollen Sie wirklich auf Element löschen",ru:"Вы действительно хотите удалить элемент",pt:"Você realmente deseja excluir o item",nl:"Wil je echt een item verwijderen",fr:"Voulez-vous vraiment supprimer l'élément",it:"Vuoi davvero cancellare voce",es:"¿Realmente desea eliminar el elemento",pl:"Czy na pewno chcesz usunąć element","zh-cn":"您真的要删除项目吗"},"You can enter only a number here!":{en:"You can enter only a number here!",de:"Sie können geben Sie nur eine Nummer hier!",ru:"Здесь вы можете ввести только номер!",pt:"Você pode inserir somente um número aqui!",nl:"Je kunt alleen een nummer hier!",fr:"Vous ne pouvez entrer qu'un certain nombre ici!",it:"È possibile inserire solo un numero!",es:"Solo se puede introducir un número aquí!",pl:"Tutaj można wpisać tylko numer!","zh-cn":"您只能在此处输入数字！"},"Number should not be lower than ":{en:"Number should not be lower than ",de:"Zahl soll nicht geringer sein als ",ru:"Количество не должно быть ниже, чем ",pt:"Número não deve ser inferior a ",nl:"Aantal mag niet lager zijn dan ",fr:"Nombre ne doit pas être inférieure à ",it:"Numero non deve essere inferiore a ",es:"El número no debe ser inferior a ",pl:"Liczba nie powinna być niższa niż ","zh-cn":"号码不能低于"},"Number should not be bigger than ":{en:"Number should not be bigger than ",de:"Zahl sollte nicht größer sein als ",ru:"Количество не должно быть больше, чем ",pt:"Número não deve ser maior do que ",nl:"Aantal mag niet groter zijn dan ",fr:"Nombre ne doit pas être plus grand que ",it:"Il numero non deve essere più grande ",es:"El número no debe ser más grande que ",pl:"Liczba nie powinna być większa niż ","zh-cn":"数量不能大于"},Edit:{en:"Edit",de:"Bearbeiten",ru:"Редактировать",pt:"Editar",nl:"Bewerken",fr:"Modifier",it:"Modifica",es:"Editar",pl:"Edytuj","zh-cn":"编辑"},Search:{en:"Search",de:"Suche",ru:"Поиск",pt:"Procura",nl:"Zoeken",fr:"Recherche",it:"Ricerca",es:"Búsqueda",pl:"Wyszukiwanie","zh-cn":"搜索"},"Add entry":{en:"Add entry",de:"Eintrag hinzufügen",ru:"Добавить запись",pt:"Adicionar entrada",nl:"Toevoegen item",fr:"Ajouter une entrée",it:"Aggiungere la voce",es:"Agregar entrada",pl:"Dodaj wpis","zh-cn":"添加条目"},"move item one line up":{en:"move item one line up",de:"Verschiebe Element eine Zeile bis",ru:"переместить элемент на одну строку вверх",pt:"mover o item de uma linha para cima",nl:"verplaats item een line-up",fr:"déplacement d'un élément d'une ligne haut",it:"sposta l'elemento di una riga in su",es:"mover el elemento a una línea hacia arriba",pl:"przesunąć element o jeden wiersz w górę","zh-cn":"将项目向上移动一行"},"delete item":{en:"delete item",de:"Element löschen",ru:"удалить элемент",pt:"excluir item",nl:"item verwijderen",fr:"supprimer l'élément",it:"eliminare la voce",es:"eliminar elemento",pl:"usuń element","zh-cn":"删除项目"},"Added Row.":{en:"Added Row.",de:"Hinzugefügt Zeile.",ru:"Добавленную Строку.",pt:"Adicionado Linha.",nl:"Toegevoegd Op Rij.",fr:"Ajouté À La Ligne.",it:"Aggiunta Una Riga.",es:"Añadido Fila.",pl:"Dodany Wiersz.","zh-cn":"添加了行。"},"This item can only be once per table in this field!":{en:"This item can only be once per table in this field!",de:"Dieses item kann nur einmal pro Tabelle in diesem Feld!",ru:"Этот пункт может быть только один раз в таблицу в это поле!",pt:"Este item só pode ser uma vez por tabela, neste campo!",nl:"Dit item kan alleen worden eenmaal per tabel in dit veld!",fr:"Cet élément ne peut être une fois par table dans ce domaine!",it:"Questo elemento può essere solo una volta per ogni tabella in questo campo!",es:"Este elemento sólo se puede una vez por tabla en este campo!",pl:"Ten element może być tylko raz w tabeli w polu!","zh-cn":"此字段每个表只能有一次！"},"Cannot copy!":{en:"Cannot copy!",de:"Kann nicht kopieren!",ru:"Невозможно скопировать!",pt:"Não é possível copiar!",nl:"Niet kopiëren!",fr:"Ne peut pas copier!",it:"Non copiate!",es:"No se puede copiar!",pl:"Nie można skopiować!","zh-cn":"无法复制！"},"Copied to clipboard!":{en:"Copied to clipboard!",de:"In die Zwischenablage kopiert!",ru:"Скопирован в буфер обмена!",pt:"Copiado para a área de transferência!",nl:"Gekopieerd naar het klembord!",fr:"Copié dans le presse-papiers!",it:"Copiato negli appunti!",es:"Copiado al portapapeles!",pl:"Skopiowany do schowka!","zh-cn":"复制到剪贴板！"},"move item one line down":{en:"move item one line down",es:"mover el artículo una línea hacia abajo",it:"sposta l'elemento di una riga in basso",ru:"переместить элемент на одну строку вниз",pt:"mover o item uma linha para baixo",de:"Verschieben Sie das Element eine Zeile nach unten",pl:"przesuń element o jedną linię w dół","zh-cn":"将项目向下移动一行",nl:"verplaats een regel naar beneden",fr:"déplacer l'élément d'une ligne vers le bas"}};var be=ge;function ve(e,t){t=t||{};for(const o of Object.keys(e))for(const r of Object.keys(e[o]))t[r]?t[r][o]=e[o][r]:t[r]={[o]:e[o][r]};return t}async function ye(e,t){try{const o=await fetch(e).then(e=>e.json()).catch(t=>(console.log("loadwords fetch",e,t),null));o&&ve(o,t)}catch(o){console.log("loadwords err",o)}}r["a"].use(fe["a"]);const ke=ve(be);ye("./words.json",ke);const we={locale:Object({NODE_ENV:"production",VUE_APP_ADAPTERNAME:"broadlink2",VUE_APP_IOBROKER:"localhost:8181",BASE_URL:""}).VUE_APP_I18N_LOCALE||"en",fallbackLocale:Object({NODE_ENV:"production",VUE_APP_ADAPTERNAME:"broadlink2",VUE_APP_IOBROKER:"localhost:8181",BASE_URL:""}).VUE_APP_I18N_FALLBACK_LOCALE||"en",messages:ke,silentTranslationWarn:!0},Ce=new fe["a"](we),Se={};r["a"].prototype.$missing=Se,Ce.loadLocaleMessages=ve,Ce.missing=(e,t,o,r)=>{const i=we.fallbackLocale;function a(){return be[t]&&be[t][e]?be[t][e]:be[t]&&be[t][i]?(Se[t]&&!Se[t][e]?Se[t][e]=t:Se[t]||(Se[t]={[e]:t}),be[t][i]):(Se[t]&&Se[t][i]||(Se[t]?Se[t][i]=t:Se[t]={[i]:t}),t)}let n=a()||"!undefined i18n key!";return"string"!=typeof n?"!undefined i18n key!":(n=n.replace(/\{([\d\w_]+)\}/g,(e,t)=>r[t.trim()]),n)};var _e=Ce,je=o("cda3"),xe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"resize",rawName:"v-resize",value:e.resize,expression:"resize"}]},[e.items.length?o("v-menu",{attrs:{dense:"",value:!0,"offset-y":"","position-x":e.posx,"position-y":e.posy,"close-on-content-click":!1,"close-on-click":!1,mode:"out-in",transition:"scale-transition"}},e._l(e.items,(function(t,r){return o("transition",{key:r,attrs:{name:"slide-fade"}},[o("v-alert",{staticClass:"ma-2",attrs:{mode:"in-out",origin:"transform-origin: -100% 50%;",border:"top","colored-border":"",color:t.color,dense:"",type:t.type,label:t.label,elevation:"5"},scopedSlots:e._u([{key:"append",fn:function(){return[o("fjB",{staticClass:"ml-2",attrs:{small:"",right:e.label,icon:!e.label,text:"",label:e.$t(e.label),img:"mdi-close"},on:{click:function(t){return t.stopPropagation(),e.deleteAlert(r)}}})]},proxy:!0}],null,!0)},[o("span",{staticClass:"body-2",domProps:{innerHTML:e._s(t.text)}})])],1)})),1):e._e(),e._t("default")],2)},Oe=[],$e={name:"fjAlerts",props:{selector:{type:String,default:""},offsetX:{type:Number,default:0},offsetY:{type:Number,default:0},timeout:{type:Number,default:6}},data(){return{posx:0,posy:0,idCount:0,items:[],label:""}},methods:{addAlert(e){const t=this,o={warning:10,error:20,info:4,success:5,primary:6,[void 0]:3};if(e=e||{},"string"===typeof e){let t=e.trim();const r=t.match(/^(?:(\d*(?=\|))?\|?(warning|error|info|success|primary)\:)?(.*)$/i);e=r?{label:"",timeout:r[1]?Number(r[1]):o[r[2]],text:r[3],type:r[2]||"primary"}:{text:t,color:"primary lighten-4"}}if("primary"===e.type&&(e.type=null,e.color||(e.color="primary lighten-2")),!e.text&&e.tt&&(e.text=this.$t(e.tt)),e=Object.assign({timeout:this.timeout,id:this.idCount++,text:"<>"},e),e.label&&(this.label=e.label),e.timeout){const o=e.id;e.hastimeout=setTimeout(r=>{e.hastimeout=null;const i=t.items.findIndex(e=>e.id===o);i>=0&&t.items.splice(i,1)},1e3*e.timeout)}return this.items.push(e),Promise.resolve(null)},deleteAlert(e){this.items[e].hastimeout&&(clearTimeout(this.items[e].hastimeout),this.items[e].hastimeout=null),this.items.splice(e,1)},random(e,t){return Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:"number"===typeof t?Math.random()*(t-e)+e:"number"===typeof e?Math.random()*e:Math.random()},resize(){const e=this.$el;this.posx=e.getBoundingClientRect().left+this.offsetX,this.posy=e.getBoundingClientRect().bottom+this.offsetY}},created(){r["a"].prototype.$alert=this.addAlert.bind(this)},beforeDestroy(){while(this.items.length>0)this.deleteAlert(0)},mounted(){this.$nextTick(e=>this.resize())}},Ie=$e,Ae=(o("4113"),o("0798")),Te=o("e449"),Ne=o("269a"),Ee=o.n(Ne),Le=o("dc22"),Pe=Object(J["a"])(Ie,xe,Oe,!1,null,null,null),Ve=Pe.exports;U()(Pe,{VAlert:Ae["a"],VMenu:Te["a"]}),Ee()(Pe,{Resize:Le["a"]});var ze=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{style:{zIndex:e.options.zIndex},attrs:{"max-width":e.options.width},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.agree(!1)}},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:e.options.color,dense:"",flat:""}},[o("v-toolbar-title",{staticClass:"white--text",domProps:{textContent:e._s(e.options.title)}})],1),o("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!e.options.message,expression:"!!options.message"}],staticClass:"pa-4",domProps:{innerHTML:e._s(e.$t(e.options.message))}}),o("v-card-actions",{staticClass:"pt-0"},[o("v-spacer"),o("v-btn",{attrs:{color:e.options.okColor,text:""},nativeOn:{click:function(t){return e.agree(!0)}}},[e.options.okIcon?o("v-icon",{attrs:{left:""},domProps:{textContent:e._s(e.options.okIcon)}}):e._e(),o("span",[e._v(e._s(e.options.okText))])],1),o("v-btn",{attrs:{color:e.options.cancelColor,text:""},nativeOn:{click:function(t){return e.agree(!1)}}},[o("span",[e._v(e._s(e.options.cancelText))]),e.options.cancelIcon?o("v-icon",{attrs:{right:""},domProps:{textContent:e._s(e.options.cancelIcon)}}):e._e()],1)],1)],1)],1)},De=[],Fe={data:()=>({dialog:!1,resolve:null,options:{}}),props:{defaults:{type:Object,default:()=>({})}},methods:{open(e,t){const o={color:"primary",cancelColor:"grey darken-2",okColor:"success darken-2",okText:this.$t("Yes"),okIcon:"mdi-check",cancelIcon:"mdi-close",cancelText:this.$t("No"),message:"",title:"",width:390,zIndex:200};if(t=t||{},!t.title&&e.indexOf("|")>0){const r=e.indexOf("|");t.message=e.slice(r+1);const i=e.slice(0,r).split(",").map(e=>e.trim().split("=").map(e=>e.trim())),a=Object.keys(o).map(e=>e.toLowerCase());let n;for(n of i){const e=n[0],r=n[1],i=a.indexOf(e.toLowerCase());e&&i>=0&&(t[Object.keys(o)[i]]=void 0===r||(Number(r)?Number(r):r))}}else t.message=e;t.title||(t.title=this.$t("Please confirm:")),this.title=t.title,this.message=t.message;const r=Object.assign({},o,this.defaults,t);return this.options=Object.assign({},this.options,r),this.dialog=!0,new Promise(e=>{this.resolve=e})},async agree(e){await this.$nextTick(),this.dialog=!1,await this.$nextTick(),this.resolve(!!e)}},created(){r["a"].prototype.$confirm=this.open.bind(this)}},Be=Fe,Me=o("99d9"),Re=o("169a"),We=o("71d9"),Je=o("2a7f"),He=Object(J["a"])(Be,ze,De,!1,null,null,null),Ue=He.exports;U()(He,{VBtn:q["a"],VCard:K["a"],VCardActions:Me["a"],VCardText:Me["b"],VDialog:Re["a"],VIcon:se["a"],VSpacer:de["a"],VToolbar:We["a"],VToolbarTitle:Je["a"]});var qe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.nCols?o("v-col",{staticClass:"pa-1",attrs:{cols:e.nCols,sm:e.sm,md:e.md,lg:e.lg}},[e._l(e.nRuler,(function(e,t){return o("fjConfigRuler",{key:t,attrs:{ruler:e}})})),e.cToolItem.type?o("fjConfigItem",{attrs:{cToolItem:e.nToolItem,cItem:e.cItem}}):e._e()],2):o("span",[e._l(e.nRuler,(function(e,t){return o("fjConfigRuler",{key:t,attrs:{ruler:e}})})),e.cToolItem.type?o("fjConfigItem",{attrs:{cToolItem:e.nToolItem,cItem:e.cItem}}):e._e()],2)},Ke=[],Ge=function(){var e=this,t=e.$createElement,o=e._self._c||t;return"text"==e.cToolItem.type?o("v-flex",e._b({},"v-flex",e.attrs("html,text,label"),!1),[e.cToolItem.label?o("div",{staticClass:"subtitle-2",domProps:{textContent:e._s(e.cToolItem.label)}}):e._e(),e.cToolItem.text?o("div",{staticClass:"caption",domProps:{textContent:e._s(e.cToolItem.text)}}):e._e(),e.cToolItem.html?o("div",{staticClass:"caption",domProps:{innerHTML:e._s(e.cToolItem.html)}}):e._e()]):"html"==e.cToolItem.type?o("v-flex",e._b({},"v-flex",e.attrs("text,label"),!1),[e.cToolItem.label?o("div",{staticClass:"subtitle-2",domProps:{textContent:e._s(e.cToolItem.label)}}):e._e(),Array.isArray(e.cToolItem.text)?o("div",{staticClass:"caption",domProps:{innerHTML:e._s(e.cToolItem.text.join("<br>"))}}):o("div",{staticClass:"caption",domProps:{innerHTML:e._s(e.cToolItem.text)}})]):"button"==e.cToolItem.type?o("fjB",e._b({on:{click:e.cToolItem.click}},"fjB",e.attrs(),!1)):"number"==e.cToolItem.type?o("v-text-field",e._b({attrs:{dense:"","hide-details":"auto"},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}},"v-text-field",e.attrs("min,max"),!1)):"string"==e.cToolItem.type?o("v-text-field",e._b({attrs:{dense:"","hide-details":"auto"},model:{value:e.cValue,callback:function(t){e.cValue=t},expression:"cValue"}},"v-text-field",e.attrs(),!1)):"checkbox"==e.cToolItem.type&&e.cToolItem.label?o("v-checkbox",e._b({attrs:{dense:"","hide-details":"auto"},on:{change:function(t){e.cToolItem.click&&e.cToolItem.click(t)}},model:{value:e.cValue,callback:function(t){e.cValue=t},expression:"cValue"}},"v-checkbox",e.attrs(),!1)):"select"==e.cToolItem.type?o("v-select",e._b({attrs:{items:e.cToolItem.select,dense:"","hide-details":"auto"},model:{value:e.cValue,callback:function(t){e.cValue=t},expression:"cValue"}},"v-select",e.attrs(),!1)):"textarea"==e.cToolItem.type?o("v-textarea",e._b({staticStyle:{"font-family":"monospace !important","font-size":"14px"},attrs:{"auto-grow":"","row-height":"15","hide-details":"auto",rows:e.cValue.split("\n").length,dense:""},model:{value:e.cValue,callback:function(t){e.cValue=t},expression:"cValue"}},"v-textarea",e.attrs(),!1)):"chips"==e.cToolItem.type&&Array.isArray(e.cValue)?o("v-combobox",e._b({attrs:{items:e.cToolItem.select||[],chips:"",dense:"","hide-details":"auto","deletable-chips":"","search-input":e.search,multiple:""},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t}},model:{value:e.cValue,callback:function(t){e.cValue=t},expression:"cValue"}},"v-combobox",e.attrs(),!1)):"table"==e.cToolItem.type?o("fjConfigTable",e._b({attrs:{columns:e.cToolItem.items,table:e.cValue}},"fjConfigTable",e.attrs(),!1)):"checkbox"!=e.cToolItem.type||e.cToolItem.label?"log"==e.cToolItem.type?o("fjIoBrokerLog",e._b({},"fjIoBrokerLog",e.attrs(),!1)):"switch"==e.cToolItem.type?o("v-switch",e._b({attrs:{dense:"","hide-details":"auto"},on:{change:function(t){e.cToolItem.click&&e.cToolItem.click(t)}},model:{value:e.cValue,callback:function(t){e.cValue=t},expression:"cValue"}},"v-switch",e.attrs(),!1)):o("div",e._b({},"div",e.attrs(),!1),[e._v(" "+e._s(e.cToolItem)+" "+e._s(e.cToolItem.value?e.cValue:"")+" ")]):o("v-simple-checkbox",e._b({on:{change:function(t){e.cToolItem.click&&e.cToolItem.click(t)}},model:{value:e.cValue,callback:function(t){e.cValue=t},expression:"cValue"}},"v-simple-checkbox",e.attrs(),!1))},Ye=[],Ze=o("ba24"),Xe=Ze["a"],Qe=o("ac7c"),et=o("2b5d"),tt=o("0e8f"),ot=o("b974"),rt=o("9e88"),it=o("b73d"),at=o("a844"),nt=Object(J["a"])(Xe,Ge,Ye,!1,null,null,null),st=nt.exports;U()(nt,{VCheckbox:Qe["a"],VCombobox:et["a"],VFlex:tt["a"],VSelect:ot["a"],VSimpleCheckbox:rt["a"],VSwitch:it["a"],VTextField:X["a"],VTextarea:at["a"]});var ct=function(){var e=this,t=e.$createElement,o=e._self._c||t;return"hr"==e.type||"line"==e.type?o("v-col",{attrs:{cols:"12"}},[o("v-divider",{class:"py-"+e.value})],1):"horizontal"==e.type?o("v-col",{class:"py-"+e.value,attrs:{cols:"12"}},[o("v-spacer")],1):"vertical"==e.type?o("v-divider",{class:"px-"+e.value,attrs:{vertical:""}}):o("v-spacer")},lt=[],dt={name:"fjConfigRuler",data(){return{}},props:{ruler:{type:Array,default:()=>[]}},computed:{type(){return this.ruler[0]},value(){return this.ruler[1]}}},ut=dt,pt=o("62ad"),mt=o("ce7e"),ht=Object(J["a"])(ut,ct,lt,!1,null,null,null),ft=ht.exports;U()(ht,{VCol:pt["a"],VDivider:mt["a"],VSpacer:de["a"]});var gt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pa-0 elevation-2"},[o("v-toolbar",{attrs:{dark:"",height:"36",color:"primary"}},[e.icon?o("v-icon",{attrs:{left:""}},[e._v(e._s(e.icon))]):e._e(),o("v-toolbar-title",{staticClass:"subtitle-2"},[e._v(e._s(e.label))]),o("v-spacer"),o("v-text-field",{staticClass:"body-1",attrs:{"append-icon":"mdi-filter",label:e.$t("Filter"),"single-line":"","hide-details":"",dense:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),o("v-spacer"),o("fjB",{attrs:{text:"",small:"",label:e.$t("Add entry"),img:"mdi-playlist-plus"},on:{click:e.addRow}})],1),o("v-data-table",e._b({attrs:{dense:"",headers:e.icolumns,items:e.table||[],search:e.search,disableSort:e.disableSort},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item,i=t.headers,a=t.index;return[o("tr",{staticClass:"alternate"},e._l(i,(function(t){return o("td",{key:t.value,staticStyle:{padding:"0px 1px 0px 1px"}},["-"==t.value?o("span",{staticClass:"d-flex justify-center"},[e.disableSort?o("fjB",{attrs:{disabled:e.table.indexOf(r)<1,color:"primary darken-4",img:"mdi-transfer-up",tooltip:e.$t("move item one line up")},on:{click:function(t){return t.stopPropagation(),e.itemMove(r,-1)}}}):e._e(),e.disableSort?o("fjB",{attrs:{color:"primary darken-4",disabled:e.table.indexOf(r)>=e.table.length-1,img:"mdi-transfer-down",tooltip:e.$t("move item one line down")},on:{click:function(t){return t.stopPropagation(),e.itemMove(r,1)}}}):e._e(),o("fjB",{attrs:{img:"mdi-delete-forever",color:"error darken-4",tooltip:e.$t("delete item")},on:{click:function(t){return t.stopPropagation(),e.itemDelete(r)}}})],1):o("fjConfigItem",{attrs:{cItem:r,cToolItem:t,cTable:e.cTable(a,t)}})],1)})),0)]}}])},"v-data-table",e.$attrs,!1))],1)},bt=[],vt={name:"fjConfigTable",props:{table:{type:Array,required:!1,default:()=>[]},columns:{type:Array,required:!0},label:{type:String,required:!1,default:""},icon:{type:String,required:!1,default:"mdi-table"},disableSort:{type:Boolean,required:!1,default:!1}},data:()=>({search:""}),methods:{async itemDelete(e){if(this.table.indexOf(e)<0)return;const t=this.table.indexOf(e),o=await this.$confirm(this.$t("Do you really want to delete item")+` '${e.path}' ?`);o&&this.table.splice(t,1)},itemMove(e,t){const o=this.table.indexOf(e);if(!(o>=0))return;e=o;const r=this.table.splice(e,1);this.table.splice(e+t,0,r[0])},numberRule(e){const t=Number(e);return isNaN(t)?this.$t("You can enter only a number here!"):void 0!=this.cToolItem.min&&t<this.cToolItem.min?this.$t("Number should not be lower than ")+this.cToolItem.min:!(void 0!=this.cToolItem.max&&t>this.cToolItem.max)||this.$t("Number should not be bigger than ")+this.cToolItem.min},cTable(e,t){return{items:this.table,index:e,column:t}},addRow(){let e={};this.columns.forEach((t,o)=>{e[t.value]=void 0!==t.default?t.default:{text:"",string:"",textarea:"",number:0,select:t.select&&t.select.find(e=>void 0!=e)||"",checkbox:!1,chips:[]}[t.type]||""}),this.table.push(e)}},computed:{icolumns(){return[...this.columns,{text:"✍",value:"-",align:"center",filterable:!1,sortable:!1,width:this.disableSort?"5%":"2%"}]}}},yt=vt,kt=(o("d1dc"),o("8fea")),wt=Object(J["a"])(yt,gt,bt,!1,null,null,null),Ct=wt.exports;U()(wt,{VDataTable:kt["a"],VIcon:se["a"],VSpacer:de["a"],VTextField:X["a"],VToolbar:We["a"],VToolbarTitle:Je["a"]}),r["a"].component("fjConfigItem",st),r["a"].component("fjConfigRuler",ft),r["a"].component("fjConfigTable",Ct);var St={name:"fjConfigElement",data(){return{nToolItem:{},nRuler:[],nCols:"",sm:"",md:"",lg:""}},props:{cToolItem:{type:Object,default:()=>({type:"none"})},cItem:{type:Object,default:()=>({})}},methods:{makeItems(){const e=this.copyObject(this.cToolItem);let{ruler:t,cols:o,rcols:r,sm:i,md:a,lg:n}=e;delete e.ruler,delete e.cols,delete e.sm,delete e.md,delete e.lg,this.sm=i||void 0,this.md=a||void 0,this.nToolItem=e,o&&Number(o)&&(this.nCols=o.toString()),this.lg=n||(i||a?o:void 0),t=t&&t.split("|").map(e=>(e=e&&e.trim().split("=").map(e=>e.trim())||[],1==e.length&&e.push(1),e)),this.nRuler=t||[]}},watch:{cToolItem:{deep:!0,handler:function(){this.makeItems()}}},created(){this.makeItems()}},_t=St,jt=Object(J["a"])(_t,qe,Ke,!1,null,null,null),xt=jt.exports;U()(jt,{VCol:pt["a"]});var Ot=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-container",{attrs:{fluid:""}},[o("v-row",{staticClass:"px-2"},e._l(e.items,(function(t,r){return o("fjConfigElement",{key:r,attrs:{cItem:e.cItem,cToolItem:t}})})),1)],1)},$t=[],It={name:"fjConfigContainer",data(){return{items:[]}},props:{cItem:{type:Object,default:()=>({})},configPage:{type:Object,default:()=>({items:[],page:-1})}},created(){this.createItems()},methods:{createItems(){const e=this.copyObject(this.configPage.items);this.wait(0).then(()=>(this.$set(this,"items",e),this.wait(2).then(()=>this.$forceUpdate())))}},watch:{configPage:{handler:function(){this.createItems()},deep:!0}}},At=It,Tt=o("a523"),Nt=o("0fd9"),Et=Object(J["a"])(At,Ot,$t,!1,null,null,null),Lt=Et.exports;U()(Et,{VContainer:Tt["a"],VRow:Nt["a"]});var Pt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("fjB",e._b({class:e.over?e.dropclass:"",attrs:{label:e.over?e.droplabel:e.label,loading:e.loading,disabled:e.loading},on:{click:function(t){return t.stopPropagation(),e.triggerLoad(t)}}},"fjB",e.$attrs,!1),[o("input",{staticStyle:{display:"none"},attrs:{type:"file",id:e.myId},on:{change:e.loadTextFromFile}})])},Vt=[],zt=o("7a8b"),Dt=zt["a"],Ft=Object(J["a"])(Dt,Pt,Vt,!1,null,null,null),Bt=Ft.exports,Mt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("fjB",e._b({on:{click:function(t){return e.saveFile(e.content,e.opts,t)}}},"fjB",e.$attrs,!1))},Rt=[],Wt=o("21a6"),Jt={name:"fjFileSaveButton",components:{fjB:je["a"]},props:{content:{type:Object,default:()=>"empty file!"},opts:{type:Object,default:()=>({type:"JSON"})}},computed:{},methods:{consoleLog(...e){console.log(...e)},doCopyClipboard(e){const t=this;return e?("string"!==typeof e&&(e=JSON.stringify(e,null,2)),this.$copyText(e).then(e=>{t.$alert("2|success:"+t.$t("Copied to clipboard!"))},e=>{t.$alert("warning:",t.$t("Cannot copy!"))})):Promise.resolve()},exportFile(e,t){if(void 0===e||null===e)return{str:""};t=t||{type:"string"===typeof e?"Text":"JSON"};let{type:o,addAtStart:r,addAtEnd:i,saveWithJSON:a,name:n,fileName:s,basename:c,skippedAfterEnd:l,skippedAtStart:d}=t;const u={JSON:{stringify:!0,ending:".json",mime:"application/json"},Javascript:{stringify:!0,ending:".js",mime:"application/javascript"},Text:{ending:".txt",mime:"text/plain"}};let{stringify:p,ending:m,mime:h}=u[o]||u.Text;p=p||a,n||(n=s||(c||"file")+m),r=("!"===r?d:r&&r.split("\\n").join("\n"))||"",i=("!"===i?l:i&&i.split("\\n").join("\n"))||"";const f=r+(p?JSON.stringify(e,null,2):e)+i;return{name:n,str:f,mime:h,ending:m}},saveFile(e,t,o){const{mime:r,str:i,name:a}=this.exportFile(e,t);if(!r)return Promise.reject("invalid value to save!");if(o.shiftKey)return o.preventDefault(),o.str=i.toString(),this.doCopyClipboard(o.str),!1;const n=new Blob([i],{type:r+";charset=utf-8"});return Object(Wt["saveAs"])(n,a)}},created(){"function"!=typeof this.$alert&&(r["a"].prototype.$alert=this.consoleLog)},mounted(){}},Ht=Jt,Ut=Object(J["a"])(Ht,Mt,Rt,!1,null,null,null),qt=Ut.exports,Kt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.icon?o("v-avatar",e._b({attrs:{left:"",size:e.size}},"v-avatar",e.avprops,!1),[e.icon.indexOf(".")>=0?o("v-img",{attrs:{src:e.icon}}):o("v-icon",[e._v(e._s(e.icon))])],1):e._e()},Gt=[],Yt={name:"fjAvatar",data:()=>({avprops:{}}),props:{icon:{type:String,required:!0,default:()=>""},size:{type:String,default:()=>"24"}},created(){const e=this.$attrs,t={};for(const o of Object.entries(e)){const[r,i]=o;["left","right","tile"].indexOf(r)>=0&&(t[r]=i,delete e[r])}this.avprops=t}},Zt=Yt,Xt=o("8212"),Qt=Object(J["a"])(Zt,Kt,Gt,!1,null,null,null),eo=Qt.exports;U()(Qt,{VAvatar:Xt["a"],VIcon:se["a"],VImg:ce["a"]});var to=o("4eb5"),oo=o.n(to),ro=o("8055"),io=o.n(ro),ao=o("5132"),no=o.n(ao);const so=!1;var co=location.pathname,lo=co.split("/");lo.splice(-3),co.match(/^\/admin\//)&&(lo=[]);const uo=so?"ws://localhost:8181":"/",po={path:lo.join("/")+"/socket.io"},mo=io()(uo,po),ho=new no.a({connection:mo,vuex:{store:L,actionPrefix:"SOCKET_"}});r["a"].prototype.$socketEmit=async function(e,...t){let o=5e3;return"object"==typeof e&&(o=Number(e.timeout||1e3),e=e.event||"pong"),new Promise((r,i)=>{let a=setTimeout(()=>i(new Error(`socketEmit - timeout for ${e}: ${t}`)),o);mo.emit(e,...t,(e,t)=>{a&&clearTimeout(a),e?i(e):r(t)})})},r["a"].prototype.$socketSendTo=async function(e,...t){let o=5e3;return"object"==typeof e&&(o=Number(e.timeout||5e3),e=e.event||"pong"),new Promise((r,i)=>{let a=setTimeout(()=>i(new Error(`socketSendTo - timeout for ${e}: ${t}`)),o);mo.emit(e,...t,e=>{a&&clearTimeout(a),r(e)})})};var fo=ho;r["a"].component("fjB",je["a"]),r["a"].component("fjAlerts",Ve),r["a"].component("fjConfirm",Ue),r["a"].component("fjConfigElement",xt),r["a"].component("fjConfigContainer",Lt),r["a"].component("fjFileLoadButton",Bt),r["a"].component("fjFileSaveButton",qt),r["a"].component("fjAvatar",eo),r["a"].config.productionTip=!1,r["a"].use(oo.a),r["a"].use(fo,{}),r["a"].prototype.$alert=function(...e){console.log(...e)},r["a"].mixin({methods:{copyObject(e){function t(e,o){if(Array.isArray(e))return e.map(r=>(o.push(e),o.indexOf(r)<0&&(r=t(r,o)),o.pop(),r));if("object"===typeof e){const r={};o.push(e);for(const[i,a]of Object.entries(e))o.indexOf(a)<0?r[i]=t(a,o):console.log("recursive object ",i,a);return o.pop(),r}return e}return t(e,[])},myStringify(e){let t;try{t=JSON.stringify(e)}catch(o){console.log("MyStringify error:",o),t="{}"}return t},makeFunction(e,t,...o){if(t=t||this,"function"==typeof e)return e;if("object"==typeof e){if("string"==typeof e.regexp){const o=e.regexp.match(/^\/(.*)\/([gimy]*)$/),r=o?new RegExp(...o.slice(1,3)):null;let i,a=this.$t(e.message);return i=r?e=>(Array.isArray(e)&&(e=e.slice(-1)[0]),!!(e||"").match(r)||a):t=>(Array.isArray(t)&&(t=t.slice(-1)[0]),(t||"").indexOf(e.regexp)>=0||a),i.bind(t)}if("string"==typeof e.number){const o=this.$t(e.number),r=void 0===e.min||isNaN(Number(e.min))?Number.NEGATIVE_INFINITY:Number(e.min),i=void 0===e.max||isNaN(Number(e.max))?Number.POSITIVE_INFINITY:Number(e.max),a=Array.isArray(e.has)?e.has:[],n=e.fixed?parseInt:parseFloat,s=e=>{Array.isArray(e)&&(e=e.slice(-1)[0]);const t=n(e);return!isNaN(t)&&(t>=r&&t<=i||a.indexOf(t)>=0)||o};return s.bind(t)}}else if("string"==typeof e&&e.trim()){if("function"==typeof t[e])return t[e].bind(t);e=[...o,e.trim()];try{let o=e[e.length-1];o=o.startsWith("return ")||o.startsWith("{")?o:`return ${o};`,e[e.length-1]=o;const r=new Function(...e);return r.bind(t)}catch(r){console.log(`makeFunction error ${r} in function generation with: ${e}`)}}else console.log("makeFunction - Invalid function content in rule:",e);return null},async wait(e,t){return e=Number(e)||0,(isNaN(e)||e<0)&&(e=0),await new Promise(o=>setTimeout(()=>o(t),e))}}}),new r["a"]({vuetify:x,i18n:_e,store:L,render:function(e){return e(he)}}).$mount("#app")},"592b":function(e,t,o){var r=o("24fb");t=r(!1),t.push([e.i,"::v-deep .slide-fade-enter-active{transition:all .3s ease}::v-deep .slide-fade-leave-active{transition:all .6s cubic-bezier(1,.5,.8,1)}.slide-fade-leave-to,::v-deep .slide-fade-enter{transform:translatex(100px);opacity:0}::v-deep .v-menu__content{transition:all .3s ease}",""]),e.exports=t},"7a8b":function(module,__webpack_exports__,__webpack_require__){"use strict";var _fjB_vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("cda3");__webpack_exports__["a"]={name:"fjFileLoadButton",components:{fjB:_fjB_vue__WEBPACK_IMPORTED_MODULE_0__["a"]},props:{opts:{type:Object,default:()=>({type:"JSON",basename:"FileLoadButton"})},dropclass:{type:String,default:"success"},label:{type:String,default:""},message:{type:String,default:""},droplabel:{type:String,default:"Drop here"}},data(){return{loading:!1,drop:!1,over:!1}},computed:{myId(){const e=(this.opts.basename||"FileLoadButton_")+this._uid.toString();return e}},watch:{},methods:{importFile(r,opts){opts=opts||{type:"JSON"};const{skipAtStart:skipAtStart,skipAfterEnd:skipAfterEnd,type:type}=opts;let ss=skipAtStart?r.indexOf(skipAtStart):-1;ss>0&&(opts.skippedAtStart=r.slice(0,ss),r=r.slice(ss));let se=skipAfterEnd?r.lastIndexOf(skipAfterEnd):-1;if(se>0&&(opts.skippedAfterEnd=r.slice(se+1),r=r.slice(0,se+1)),"JSON"===type)try{r=JSON.parse(r)}catch(e){r="Error: file did not include json syntax!",this.$alert("error:JSON.parse: "+e)}else if("Javascript"===type)try{r=eval("("+r+")")}catch(e){r="Error: file could not be evaluated!",this.$alert("error:eval: "+e)}return r},loadTextFromFile(e){const t=this;e.target.files&&e.target.files.length||(this.loading=!1,e.target.value&&this.$alert("warning:"+this.tt("Browser does not load same file again!"),this.loading=!1)),this.loading=!0;const o=e.target.files[0],r=new FileReader;this.$nextTick(e=>{this.opts.name=o.name,r.onload=e=>{let o=e.target.result;o=t.importFile(o,t.opts),t.$emit("onchange",o),t.$alert&&t.message&&t.$alert("2|success:"+this.message),t.loading=!1},r.readAsText(o)},this)},triggerLoad(){const e=document.getElementById(this.myId);e.value=null,e.click()}},created(){},mounted(){const e=this;this.drop="undefined"!==typeof window.FileReader;const t=this.$el;this.drop&&(t.ondragleave=t.ondragover=t.ondragenter=function(){return e.over=!0,!1},t.ondragleave=function(){return e.over=!1,!1},t.ondrop=function(t){return e.over=!1,t.preventDefault(),t.target.files=t.dataTransfer.files,e.$nextTick().then(o=>e.loadTextFromFile(t)),!1})},unmounted(){if(this.drop){const e=this.$el;e.ondragenter=e.ondragover=e.ondragleave=e.ondrop=null}}}},ba24:function(module,__webpack_exports__,__webpack_require__){"use strict";var _fjIoBrokerLog__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1f19");__webpack_exports__["a"]={name:"fjConfigItem",components:{fjIoBrokerLog:_fjIoBrokerLog__WEBPACK_IMPORTED_MODULE_0__["a"]},data(){return{search:null}},props:{cToolItem:{type:Object,default:()=>({type:"none"})},cItem:{type:Object,default:()=>({})},cTable:{type:Object,default:()=>({})}},computed:{number:{get(){let e=this.cItem[this.cToolItem.value];return void 0===e&&(e=0),"string"!==typeof e&&"boolean"!==typeof e||Number(e),isNaN(e)&&(e=0),e.toString()},set(e){const t=Number(e);isNaN(t)||this.$set(this.cItem,this.cToolItem.value,t)}},cValue:{get(){const ct=this.cTable,cv=this.cToolItem,value=cv.value,ci=this.cItem;if(!value.startsWith("("))return ci[value];const o=eval(value);return o},set(val){const value=this.cToolItem.value,ci=this.cItem;if(!value.startsWith("("))return this.$set(ci,value,val);const o=eval(value+"=val");return o}}},methods:{removeChip(e){this.cValue.splice(this.cItem[this.cToolItem.value].indexOf(e),1)},numberRule(e){const t=Number(e);return isNaN(t)?this.$t("You can enter only a number here!"):void 0!=this.cToolItem.min&&t<this.cToolItem.min?this.$t("Number should not be lower than ")+this.cToolItem.min:!(void 0!=this.cToolItem.max&&t>this.cToolItem.max)||this.$t("Number should not be bigger than ")+this.cToolItem.max},uniqueTableRule(e){const{items:t,column:o}=this.cTable,r=(""+e).trim(),i=o.value,a=t.filter(e=>(""+e[i]).trim()==r);return a.length<=1||this.$t("This item can only be once per table in this field!")},onlyWords(e){return Array.isArray(e)&&(e=e[0]),!!e.match(/^[\u00C0-\u017Fa-zA-Z0-9_\-\@\$\/]+$/)||this.$t("Only letters, numbers and `_ - @ $ /` are allowed!")},stringToArrayWith(e,t,o){o=o||",";const r=t[e.value];if("string"===typeof r){const o=r.split(",").map(e=>e.trim());1!=o.length||o[0]||o.splice(0,1),t[e.value]=o}},attrs(e){const t=["type","value","attrs","convertold","click","select","eval","_translated"];if(e&&("string"===typeof e?t.push(...e.split(",").map(e=>e.trim())):Array.isArray(e)&&t.push(...e)),this.cToolItem.convertold&&"function"!==typeof this.cToolItem.convertold&&(this.cToolItem.convertold=this.makeFunction(this.cToolItem.convertold,this,"item","conf")),this.cToolItem.click&&"function"!==typeof this.cToolItem.click&&(this.cToolItem.click=this.makeFunction(this.cToolItem.click,this,"item","conf")),"string"==typeof this.cToolItem.eval&&this.cToolItem.eval.trim()){const e=this.makeFunction(this.cToolItem.eval.trim(),this,"item","conf");try{e(this.cToolItem,this.cItem)}catch(a){console.log("eval error in translation:",nitem,a,this)}}if("string"===typeof this.cToolItem.disabled&&this.cToolItem.disabled.length>1&&(this.cToolItem.disabled=this.makeFunction(this.cToolItem.disabled,null,"conf")),"function"==typeof this.cToolItem.convertold)try{this.cToolItem.convertold(this.cToolItem,this.cItem)}catch(a){console.log(`error ${a} in conversion function of item ${JSON.stringify(this.cToolItem)}`)}const o=Object.assign({},this.cToolItem.attrs?this.cToolItem.attrs:{class:"pa-1"},this.cToolItem);"function"==typeof o.disabled&&(o.disabled=o.disabled(this.cItem));const r=o.rules,i=[];if(r&&r.length){for(let e of r){const t=this.makeFunction(e,this,"$");t&&i.push(t)}o.rules=i}for(let n of t)delete o[n];for(let n of["text","label","placeholder","hint"])"string"==typeof o[n]&&(o[n]=this.$t(o[n]));return o}}}},bc30:function(e,t,o){var r=o("c6a6");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=o("499e").default;i("16835054",r,!0,{sourceMap:!1,shadowMode:!1})},c6a6:function(e,t,o){var r=o("24fb");t=r(!1),t.push([e.i,"td,th,th[role=columnheader]{padding:0 1px;border-left:1px dotted #ddd}tr.alternate:nth-child(2n){background:#e3f2fd}.v-text-field{padding-top:0;margin-top:4px}",""]),e.exports=t},cda3:function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.label||void 0!=e.bAttrs.icon?o("v-btn",e._b({attrs:{id:e.myUid},on:{click:function(t){return t.stopPropagation(),e.click(t)}}},"v-btn",e.bAttrs,!1),[e.img&&e.bAttrs.left&&!e.bAttrs.right?o("v-icon",e._b({attrs:{left:""},domProps:{textContent:e._s(e.img)}},"v-icon",e.bAttrs,!1)):e._e(),e.label?o("span",[e._v(e._s(e.label))]):e._e(),!e.img||!e.bAttrs.right&&e.bAttrs.left?e._e():o("v-icon",e._b({attrs:{right:void 0==e.bAttrs.icon},domProps:{textContent:e._s(e.img)}},"v-icon",e.bAttrs,!1)),e._t("default"),e.tooltip?o("v-tooltip",e._b({attrs:{activator:e.activator}},"v-tooltip",e.ttAttrs,!1),[o("span",[e._v(e._s(e.tooltip))])]):e._e()],2):e.img?o("span",[o("v-icon",e._b({attrs:{id:e.myUid},domProps:{textContent:e._s(e.img)},on:{click:function(t){return t.stopPropagation(),e.click(t)}}},"v-icon",e.bAttrs,!1)),e.tooltip?o("v-tooltip",e._b({attrs:{activator:e.activator}},"v-tooltip",e.ttAttrs,!1),[o("span",[e._v(e._s(e.tooltip))])]):e._e(),e._t("default")],2):o("span",[o("v-icon",e._b({attrs:{id:e.myUid},on:{click:function(t){return t.stopPropagation(),e.click(t)}}},"v-icon",e.bAttrs,!1),[e._t("default")],2),e.tooltip?o("v-tooltip",e._b({attrs:{activator:e.activator}},"v-tooltip",e.ttAttrs,!1),[o("span",[e._v(e._s(e.tooltip))])]):e._e()],1)},i=[],a={name:"fjB",inheritAttrs:!1,data(){return{myUid:"tooltipa_"+this._uid}},props:{img:{type:String,default:""},label:{type:String,default:""},tooltip:{type:String,default:""},ttAttr:{type:Object,default:()=>({bottom:!0})},bAttr:{type:Object,default:()=>({dense:!0})}},methods:{click(e){this.$emit("click",e)}},computed:{ttAttrs(){const e=this.ttAttr;return e.top||e.left||e.right||(e.bottom=!0),e},bAttrs(){const e=this.bAttr;Object.assign(e,this.$attrs);for(const t of Object.keys(e))""!==e[t]||"left"!=t&&"right"!=t&&"dense"!=t||(e[t]=!0);return e},activator(){return"#"+this.myUid}},created(){}},n=a,s=o("2877"),c=o("6544"),l=o.n(c),d=o("8336"),u=o("132d"),p=o("3a2f"),m=Object(s["a"])(n,r,i,!1,null,null,null);t["a"]=m.exports;l()(m,{VBtn:d["a"],VIcon:u["a"],VTooltip:p["a"]})},d1dc:function(e,t,o){"use strict";o("bc30")},d44a:function(e,t,o){var r=o("592b");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=o("499e").default;i("76d887fb",r,!0,{sourceMap:!1,shadowMode:!1})}});